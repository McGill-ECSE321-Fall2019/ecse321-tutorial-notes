<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="McGill University">
<title>ECSE 321 Introduction to Software Engineering: Hands-on Tutorials</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>ECSE 321 Introduction to Software Engineering: Hands-on Tutorials</h1>
<div class="details">
<span id="author" class="author">McGill University</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preliminaries">1. Preliminaries</a>
<ul class="sectlevel2">
<li><a href="#_getting_started">1.1. Getting Started</a></li>
<li><a href="#_project_management_tools_for_agile_development">1.2. Project Management Tools for Agile Development</a>
<ul class="sectlevel3">
<li><a href="#_github_projects">1.2.1. GitHub Projects</a></li>
</ul>
</li>
<li><a href="#_command_line_basics">1.3. Command Line Basics</a>
<ul class="sectlevel3">
<li><a href="#_windows_prerequisites">1.3.1. Windows prerequisites</a></li>
<li><a href="#_basic_file_system_operaions">1.3.2. Basic file system operaions</a></li>
<li><a href="#_finding_files">1.3.3. Finding files</a></li>
<li><a href="#_batch_file_operations">1.3.4. Batch file operations</a></li>
<li><a href="#_some_additional_useful_commands">1.3.5. Some additional useful commands</a></li>
</ul>
</li>
<li><a href="#_git_and_github">1.4. Git and GitHub</a>
<ul class="sectlevel3">
<li><a href="#_installing_git">1.4.1. Installing Git</a></li>
<li><a href="#_creating_a_remote_git_repository_on_github">1.4.2. Creating a remote git repository on GitHub</a></li>
<li><a href="#_cloning_to_a_local_repository">1.4.3. Cloning to a local repository</a></li>
<li><a href="#_git_basics">1.4.4. Git basics</a></li>
<li><a href="#_browsing_commit_history_on_github">1.4.5. Browsing commit history on GitHub</a></li>
</ul>
</li>
<li><a href="#_travis_ci">1.5. Travis CI</a></li>
<li><a href="#_gradle_a_build_framework">1.6. Gradle: A Build Framework</a>
<ul class="sectlevel3">
<li><a href="#_example_gradle_application">1.6.1. Example Gradle application</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_backend">2. Backend</a>
<ul class="sectlevel3">
<li><a href="#_setting_up_a_spring_spring_boot_backend_app_with_gradle">2.1. Setting up a Spring/Spring Boot backend app with Gradle</a></li>
<li><a href="#_heroku">2.2. Heroku</a>
<ul class="sectlevel3">
<li><a href="#_preparations">2.2.1. Preparations</a></li>
<li><a href="#_creating_a_heroku_app">2.2.2. Creating a Heroku app</a></li>
<li><a href="#_adding_a_database_to_the_application">2.2.3. Adding a database to the application</a></li>
<li><a href="#_extending_the_build_for_the_heroku_deployment_environment">2.2.4. Extending the build for the Heroku deployment environment</a></li>
<li><a href="#_supply_application_specific_setting_for_heroku">2.2.5. Supply application-specific setting for Heroku</a></li>
<li><a href="#_deploying_the_app">2.2.6. Deploying the app</a></li>
</ul>
</li>
<li><a href="#_domain_modeling_and_code_generation">2.3. Domain modeling and code generation</a>
<ul class="sectlevel3">
<li><a href="#_installing_uml_lab">2.3.1. Installing UML Lab</a></li>
<li><a href="#_uml_lab_project_setup">2.3.2. UML Lab project setup</a></li>
<li><a href="#_domain_modeling_exercise_the_event_registration_system">2.3.3. Domain modeling exercise: the Event Registration System</a></li>
</ul>
</li>
<li><a href="#_setting_up_a_spring_based_backend">2.4. Setting up a Spring-based Backend</a>
<ul class="sectlevel3">
<li><a href="#_running_the_backend_application_from_eclipse">2.4.1. Running the Backend Application from Eclipse</a></li>
<li><a href="#_spring_transactions">2.4.2. Spring Transactions</a></li>
<li><a href="#_debugging_connecting_to_the_database_using_a_client">2.4.3. Debugging: connecting to the database using a client</a></li>
</ul>
</li>
<li><a href="#_crud_repositories_and_services">2.5. CRUD Repositories and Services</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_crud_repository">2.5.1. Creating a CRUD Repository</a></li>
<li><a href="#_implementing_services">2.5.2. Implementing Services</a></li>
</ul>
</li>
<li><a href="#_unit_testing_persistence_in_the_backend_service">2.6. Unit Testing Persistence in the Backend Service</a></li>
<li><a href="#_creating_restful_web_services_in_spring">2.7. Creating RESTful Web Services in Spring</a>
<ul class="sectlevel3">
<li><a href="#_preliminaries_2">2.7.1. Preliminaries</a></li>
<li><a href="#_building_a_restful_web_service">2.7.2. Building a RESTful Web Service</a></li>
<li><a href="#_test_the_service">2.7.3. Test the Service</a></li>
<li><a href="#_spring_data_an_alternative_to_exposing_the_database">2.7.4. Spring Data - an Alternative to Exposing the Database</a></li>
</ul>
</li>
<li><a href="#_testing_backend_services">2.8. Testing Backend Services</a>
<ul class="sectlevel3">
<li><a href="#preparations">2.8.1. Preparations</a></li>
<li><a href="#_writing_tests">2.8.2. Writing tests</a></li>
</ul>
</li>
<li><a href="#_code_coverage_using_eclemma">2.9. Code Coverage using EclEmma</a>
<ul class="sectlevel3">
<li><a href="#_preliminary">2.9.1. Preliminary</a></li>
<li><a href="#_creating_a_gradle_project">2.9.2. Creating a Gradle Project</a></li>
<li><a href="#_retrieving_test_coverage_metrics">2.9.3. Retrieving Test Coverage Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_web_frontend">3. Web Frontend</a>
<ul class="sectlevel2">
<li><a href="#_installation_instructions_vue_js">3.1. Installation Instructions: Vue.js</a>
<ul class="sectlevel3">
<li><a href="#_install_vue_js">3.1.1. Install Vue.js</a></li>
<li><a href="#_generate_initial_vue_js_project_content">3.1.2. Generate initial Vue.js project content</a></li>
<li><a href="#_install_additional_dependencies">3.1.3. Install additional dependencies</a></li>
<li><a href="#_setting_up_your_development_server">3.1.4. Setting up your development server</a></li>
<li><a href="#_commit_your_work_to_github">3.1.5. Commit your work to Github</a></li>
</ul>
</li>
<li><a href="#_create_a_static_vue_js_component">3.2. Create a Static Vue.js Component</a>
<ul class="sectlevel3">
<li><a href="#_create_a_component_file">3.2.1. Create a component file</a></li>
<li><a href="#_create_a_new_routing_command">3.2.2. Create a new routing command</a></li>
</ul>
</li>
<li><a href="#_vue_js_components_with_dynamic_content">3.3. Vue.js Components with Dynamic Content</a>
<ul class="sectlevel3">
<li><a href="#_add_data_and_event_handlers">3.3.1. Add data and event handlers</a></li>
<li><a href="#_create_dynamic_data_bindings">3.3.2. Create dynamic data bindings</a></li>
</ul>
</li>
<li><a href="#_calling_backend_services">3.4. Calling Backend Services</a>
<ul class="sectlevel3">
<li><a href="#_calling_backend_services_in_from_vue_js_components">3.4.1. Calling backend services in from Vue.js components</a></li>
</ul>
</li>
<li><a href="#_build_and_travis_ci">3.5. Build and Travis-CI</a></li>
<li><a href="#_additional_steps_in_the_tutorial">3.6. Additional steps in the tutorial</a>
<ul class="sectlevel3">
<li><a href="#_steps_to_complete">3.6.1. Steps to complete</a></li>
<li><a href="#_further_documentation">3.6.2. Further documentation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_mobile_frontend">4. Mobile Frontend</a>
<ul class="sectlevel2">
<li><a href="#_setting_up_your_repository">4.1. Setting up your repository</a></li>
<li><a href="#_create_an_android_project">4.2. Create an Android project</a></li>
<li><a href="#_developing_for_android_part_1">4.3. Developing for Android: Part 1</a>
<ul class="sectlevel3">
<li><a href="#_developing_the_view_layout">4.3.1. Developing the View Layout</a></li>
<li><a href="#_connecting_to_backend_via_restful_service_calls">4.3.2. Connecting to backend via RESTful service calls</a></li>
</ul>
</li>
<li><a href="#_running_and_testing_the_application_on_a_virtual_device">4.4. Running and Testing the Application on a Virtual Device</a></li>
<li><a href="#_developing_for_android_part_2">4.5. Developing for Android (Part 2)</a>
<ul class="sectlevel3">
<li><a href="#_create_helper_classes">4.5.1. Create helper classes</a></li>
<li><a href="#_update_view_definition">4.5.2. Update view definition</a></li>
<li><a href="#_initialization_on_application_launch">4.5.3. Initialization on application launch</a></li>
<li><a href="#_reactions_to_updated_data">4.5.4. Reactions to updated data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://mcgill-ecse321-fall2019.github.io/ecse321-tutorial-notes/">HTML version</a></p>
</li>
<li>
<p><a href="https://mcgill-ecse321-fall2019.github.io/ecse321-tutorial-notes/ECSE-321-Tutorials.pdf">PDF version</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sections of the tutorial will continuously be published at this web page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preliminaries">1. Preliminaries</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_getting_started">1.1. Getting Started</h3>
<div class="paragraph">
<p>Steps for signing up for GitHub classroom:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in/Register on GitHub.</p>
</li>
<li>
<p>Open link <a href="https://classroom.github.com/g/o9gWNZis" class="bare">https://classroom.github.com/g/o9gWNZis</a></p>
</li>
<li>
<p>Select your McGill ID from the list</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/mcgill-ids.png" alt="ID selection"></span></p>
</div>
</li>
<li>
<p>Join team <em>All students</em></p>
<div class="paragraph">
<p><span class="image"><img src="./figs/join-org.png" alt="Join team"></span></p>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_project_management_tools_for_agile_development">1.2. Project Management Tools for Agile Development</h3>
<div class="sect3">
<h4 id="_github_projects">1.2.1. GitHub Projects</h4>
<div class="paragraph">
<p>First, we create a new repository under everyone&#8217;s own account to demonstrate the basic features of "GitHub Projects".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Visit <a href="https://github.com/" class="bare">https://github.com/</a> then click on <em>New repository</em> (green buttom on the right).</p>
</li>
<li>
<p>Set your user as the owner of the repository.</p>
</li>
<li>
<p>Give a name for the repository (e.g., ecse321-tutorial-1), leave it <em>public</em>, then check <em>Initialize this repository with a README</em>. Click on <em>Create repository</em> afterwards. At this point the remote repository is ready to use.<br>
<span class="image"><img src="./figs/create-repo.png" alt="Creating a repository on GitHub"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the repository is ready, associate a new GitHub Project and see how their features work. Create a project:<br>
<span class="image"><img src="./figs/github-project-creation.png" alt="Create GitHub Project"></span></p>
</div>
<div class="paragraph">
<p>Select Basic Kanban project style:<br>
<span class="image"><img src="./figs/github-basic-kanban.png" alt="Basic Kanban project"></span></p>
</div>
<div class="sect4">
<h5 id="_tasks_to_complete">Tasks to complete:</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a few issues to outline the tasks for the first deliverable. Assign them appropriate labels and add yourself as the assignee!<br>
<span class="image"><img src="./figs/github-issues.png" alt="Creating issues"></span></p>
</li>
<li>
<p>Create a milestone for the issues.<br>
<span class="image"><img src="./figs/github-milestone.png" alt="Create a new milestone"></span></p>
</li>
<li>
<p>Create cards from the issues on the project board.</p>
</li>
<li>
<p>See how GitHub track the project progress as you move the cards from the different columns.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_basics">1.3. Command Line Basics</h3>
<div class="paragraph">
<p>This section shows a few handy terminal commands.</p>
</div>
<div class="sect3">
<h4 id="_windows_prerequisites">1.3.1. Windows prerequisites</h4>
<div class="paragraph">
<p>This step can be skipped if you are using MacOS or Linux. However, if you are using Windows, you need to have a terminal that supports the execution of basic Linux commands. Such programs are Git Bash or MinGW, for example. You can find below a few helper steps to get MinGW running on your system.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the <a href="https://osdn.net/projects/mingw/downloads/68260/mingw-get-setup.exe/">MinGW installer from here</a></p>
</li>
<li>
<p>Install it to wherever you like, the default installation folder is <em>C:\MinGW</em></p>
</li>
<li>
<p>Once the setup finishes, open the MinGW Installation Manager</p>
</li>
<li>
<p>Select the two packages for installation as shown in the figure below<br>
<span class="image"><img src="./figs/mingw-base-install.png" alt="MinGW Base Packages"></span></p>
</li>
<li>
<p>Click on <em>Installation/Apply Changes</em>. This will take a few moments to fetch and install the required packages.</p>
</li>
<li>
<p>You can open a terminal window by running the executable <em>C:\MinGW\msys\1.0\bin\bash.exe</em></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_basic_file_system_operaions">1.3.2. Basic file system operaions</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal, and try the following commands:<br></p>
<div class="ulist">
<ul>
<li>
<p><code>pwd</code>: prints the present working directory<br>
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ pwd
/home/ecse321</code></pre>
</div>
</div>
</li>
<li>
<p><code>ls</code>: lists the content of a given folder<br>
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ls /home
ecse321 guest-user admin</code></pre>
</div>
</div>
</li>
<li>
<p><code>cd</code>: navigates the file system<br>
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd ..
$ pwd
/home
$ cd ecse321
$ pwd
/home/ecse321</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following steps will include images that illustrate the commands and their output to prevent easy copy-paste. Sorry! :)
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Creating files and reading/writing their contents</p>
<div class="ulist">
<ul>
<li>
<p><code>touch</code>: creates a file</p>
</li>
<li>
<p><code>mkdir</code>: creates a directory</p>
</li>
<li>
<p><code>mv</code>: moves a file (or directory) from its current location to a target location</p>
</li>
<li>
<p><code>echo</code>: prints a string</p>
</li>
<li>
<p><code>cat</code>: prints the contents of a file<br>
Example:</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/terminal-touch-ls-echo-cat-mkdir-mv.png" alt="terminal touch ls echo cat mkdir mv"></span></p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_finding_files">1.3.3. Finding files</h4>
<div class="paragraph">
<p>The versatile <code>find</code> command allows us to find files based on given criteria. Take look at its manual page with <code>man find</code>!</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/terminal-find.png" alt="terminal find"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_batch_file_operations">1.3.4. Batch file operations</h4>
<div class="ulist">
<ul>
<li>
<p><code>sed</code>: stream editor; changes a given string to a replacement</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Combining <code>find</code> with an additional command (e.g., <code>sed</code>) can greatly speed up your repetitive tasks.<br>
Example:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/terminal-find-sed-mv.png" alt="terminal find sed mv"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The file <em>helloworld.txt</em> in the example is initially a copy of <em>greeting.txt</em>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_some_additional_useful_commands">1.3.5. Some additional useful commands</h4>
<div class="ulist">
<ul>
<li>
<p><code>rm</code>: removes a file</p>
</li>
<li>
<p><code>cp -r</code>: copies a directory recursively with its contents</p>
</li>
<li>
<p><code>rmdir</code>: remove an empty directory</p>
</li>
<li>
<p><code>rm -rf</code>: force to recursively delete a directory (or file) and all its contents</p>
</li>
<li>
<p><code>nano</code>: an easy-to-use text editor (not available by default in MinGW)</p>
</li>
<li>
<p><code>grep</code>: finds matches for a string in a given stream of characters</p>
</li>
<li>
<p><code>ag</code>: takes a string as argument and searches through the contents of files recursively to find matches of the given string (this tool is included in the <em>silversearcher-ag</em> package)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_git_and_github">1.4. Git and GitHub</h3>
<div class="sect3">
<h4 id="_installing_git">1.4.1. Installing Git</h4>
<div class="paragraph">
<p>Install the Git version control system (VCS) from <a href="https://git-scm.com/downloads" class="bare">https://git-scm.com/downloads</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_remote_git_repository_on_github">1.4.2. Creating a remote git repository on GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://github.com/new" class="bare">https://github.com/new</a></p>
</li>
<li>
<p>Set <em>test</em> as the name of the repository</p>
</li>
<li>
<p>Check the checkbox <em>Initialize this repository with a README</em></p>
</li>
<li>
<p>Click on create repository</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_cloning_to_a_local_repository">1.4.3. Cloning to a local repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a terminal (Git bash on Windows).</p>
</li>
<li>
<p>Navigate to the designated target directory (it is typical to use the <code>git</code> folder within the home directory for storing Git repositories, e.g., <code>cd /home/username/git</code>).</p>
</li>
<li>
<p>Using a Git client, clone this newly created <em>test</em> repository to your computer. First, get the repository URL (use HTTPS for now).<br>
<span class="image"><img src="./figs/git-repourl.png" alt="Repository URL"></span><br>
Then, issue <code>git clone https://url/of/the/repository.git</code><br>
You should get an output similar to this:<br>
<span class="image"><img src="./figs/git-clone-result.png" alt="Cloning a repository"></span></p>
</li>
<li>
<p>Verify the contents of the <em>working copy</em> of the repository by <code>ls -la ./test</code>. The <em>.git</em> folder holds version information and history for the repository, while the <em>README.md</em> is an auto-generated text file by GitHub.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_git_basics">1.4.4. Git basics</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a terminal and configure username and email address. These are needed to identify the author of the different changes.<br>
<span class="image"><img src="./figs/gitconfig-username.png" alt="Configuring username"></span>
<span class="image"><img src="./figs/gitconfig-email.png" alt="Configuring email"></span><br>
Glossary&#8201;&#8212;&#8201;Part 1:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Git</strong> is your version control software</p>
</li>
<li>
<p><strong>GitHub</strong> hosts your repositories</p>
</li>
<li>
<p>A <strong>repository</strong> is a collection of files and their history</p>
</li>
<li>
<p>A <strong>commit</strong> is a saved state of the repository</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enter the working directory, then check the history by issuing <code>git log</code>. Example output:<br>
<span class="image"><img src="./figs/git-log-result.png" alt="Example output for git log"></span></p>
</li>
<li>
<p>Adding and commiting a file: use the <code>git add</code> and <code>git commit</code> commands.<br>
<span class="image"><img src="./figs/git-commit1.png" alt="git commit1"></span>
<span class="image"><img src="./figs/git-commit2.png" alt="git commit2"></span>
<span class="image"><img src="./figs/git-commit3.png" alt="git commit3"></span><br>
The effect of these commands are explained on the figure below:<br>
<span class="image"><img src="./figs/git-commit-explained.png" alt="git commit explained"></span><br>
Glossary&#8201;&#8212;&#8201;Part 2:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Working Directory</strong>: files being worked on right now</p>
</li>
<li>
<p><strong>Staging area</strong>: files ready to be committed</p>
</li>
<li>
<p><strong>Repository</strong>: A collection of commits</p>
</li>
</ul>
</div>
</li>
<li>
<p>Checking current status is done with <code>git status</code>.<br>
<span class="image"><img src="./figs/git-status.png" alt="git status"></span></p>
</li>
<li>
<p>Staging and unstaging files: use <code>git add</code> to add and <code>git reset</code> to remove files from the staging area.<br>
<span class="image"><img src="./figs/git-add.png" alt="git add"></span>
<span class="image"><img src="./figs/git-status-add.png" alt="git status add"></span>
<span class="image"><img src="./figs/git-reset.png" alt="git reset"></span><br></p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Only staged files will be included in the next commit.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>To display detailed changes in unstaged files use <code>git diff</code>, while use <code>git diff --staged</code> to show changes within files staged for commit.<br>
<span class="image"><img src="./figs/git-diff.png" alt="git diff"></span></p>
</li>
<li>
<p>Reverting to a previous version is done using <code>git checkout</code>.<br>
<span class="image"><img src="./figs/git-checkout.png" alt="git checkout"></span></p>
</li>
<li>
<p>The commands <code>git pull</code> (or the <code>git fetch</code> + <code>git rebase</code> combination) and <code>git push</code> are used to synchronize local and remote repositories.<br>
<span class="image"><img src="./figs/git-remote.png" alt="git remote"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_browsing_commit_history_on_github">1.4.5. Browsing commit history on GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can browse pushed commits in the remote repository online using GitHub. You can select the <em>commits</em> menu for a repository.<br>
<span class="image"><img src="./figs/commits-menu.png" alt="commits menu" width="600"></span><br>
To get a link for a specific commit, click on the button with the first few characters of the hash of the commit.<br>
<span class="image"><img src="./figs/commits-select.png" alt="commits select" width="600"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The source for most of the images in the Git documentation: <a href="https://github.com/shabbir-hussain/ecse321tutorials/blob/master/01-githubTutorial1.pptx" class="bare">https://github.com/shabbir-hussain/ecse321tutorials/blob/master/01-githubTutorial1.pptx</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_travis_ci">1.5. Travis CI</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://travis-ci.com/" class="bare">https://travis-ci.com/</a>, click on Sign up with GitHub.</p>
</li>
<li>
<p>Click on the green authorize button at the bottom of the page.</p>
</li>
<li>
<p>Activate Travis-CI on your GitHub account<br>
<span class="image"><img src="./figs/travis-activate.png" alt="Activate Travis-CI" width="600"></span></p>
</li>
<li>
<p>Select the repositories you want to build with Travis (make sure to include your repository that you created for this tutorial). You can modify this setting anytime later as well.</p>
</li>
<li>
<p>In your working copy of your repository, create a default Gradle java project.</p>
<div class="ulist">
<ul>
<li>
<p>Make sure you have <a href="https://gradle.org/install/">Gradle</a> installed (<code>gradle --version</code>).</p>
</li>
<li>
<p>Issue <code>gradle init --type java-library</code></p>
</li>
<li>
<p>Add a <code>.gitignore</code> to ignore generated resources by Git:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>.gradle/
build/</code></pre>
</div>
</div>
</li>
<li>
<p>Make sure your application is compiling by running <code>gradle build</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a file called <code>.travis.yml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>language: java
script:
- gradle build</code></pre>
</div>
</div>
</li>
<li>
<p>Commit and push your work. If everything is set up correctly, the build should trigger and Travis should run your build using Gradle.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_gradle_a_build_framework">1.6. Gradle: A Build Framework</h3>
<div class="sect3">
<h4 id="_example_gradle_application">1.6.1. Example Gradle application</h4>
<div class="paragraph">
<p>This section focuses on writing a Gradle (<a href="https://gradle.org/" class="bare">https://gradle.org/</a>) build script that builds a single Gradle project referred to as <em>computation</em>. The project with the below gradle structure is available for you to download and import in your IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to this <a href="https://mcgill-my.sharepoint.com/:u:/g/personal/rijul_saini_mail_mcgill_ca/ERTyFtLW8VVEjTmv9VXipGwBlv0rj7TRMAfHKKH5ZicJdg?e=hej1a8">link</a> and download the <em>computation.zip</em>. Once it is downloaded, extract the project from zip.</p>
</li>
<li>
<p>Open your IDE and import the extracted project(from step 1) as <em>Existing Gradle Project</em>.
<span class="image"><img src="./figs/gradle-import.png" alt="Gradle Import"></span></p>
</li>
<li>
<p>After improting the project, check that your imorted project has the required structure as shown below:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">computation
 build.gradle
 src
     main
      java
          application
           CompApp.java
          computation
           Computation.java
          view
              ComputationPage.java
     test
         java
             computation
                 AllTests.java
                 ComputationTestAddSubstract.java
                 ComputationTestDivideMultiply.java</code></pre>
</div>
</div>
</li>
<li>
<p>Open the <em>build.gradle</em> file and check for the relevant parts as discussed in the steps (5 to 9) below.</p>
</li>
<li>
<p><code>java</code> and the <code>application</code> plugins are added in the build configuration script <em>build.gradle</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">apply plugin: 'java'
// This plugin has a predefined 'run' task that we can reuse to use Gradle to execute our application
apply plugin: 'application'</code></pre>
</div>
</div>
</li>
<li>
<p>JUnit libraries are added in the <code>dependencies</code> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">repositories {
    mavenCentral()
}
dependencies {
    testImplementation "junit:junit:4.12"
}</code></pre>
</div>
</div>
</li>
<li>
<p>A task <code>compile(type: JavaCompile)</code> has been added to specify all source files (both application and test) and set the <em>build/bin</em> as destination dir to put all compiled class files in.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">task compile(type: JavaCompile) {
  classpath = sourceSets.main.compileClasspath
  classpath += sourceSets.test.runtimeClasspath
  sourceSets.test.java.outputDir = file('build/bin')
  sourceSets.main.java.outputDir = file('build/bin')
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
One can specify source sets and their variables the following way:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">/*
 * specifying sourceSets is not necessary in this case, since
 * we are applying the default folder structure assumed by Gradle
 */
sourceSets {
  main {
    java { srcDir 'src/main/java' }
  }
  test {
    java { srcDir 'src/test/java'}
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>The main class has been specified as shown below. Now, you can proceed and run the application.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">mainClassName='application.CompApp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the command line issue <code>gradle run</code></p>
</div>
</li>
<li>
<p>The <code>jar</code> Gradle task (defined by the <code>java</code> plugin) has been added to produce an executable jar file into <code>distributable/</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">jar {
  destinationDir=file('distributable')
  manifest {
    // It is smart to reuse the name of the main class variable instead of hardcoding it
    attributes "Main-Class": "$mainClassName"
  }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>settings.gradle</code> and its usage is to be shown later.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_backend">2. Backend</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect3">
<h4 id="_setting_up_a_spring_spring_boot_backend_app_with_gradle">2.1. Setting up a Spring/Spring Boot backend app with Gradle</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli">Spring Boot CLI</a></p>
</li>
<li>
<p>Create a new repository under your account on GitHub for an example application that we are going to develop throughout the semester. Name the repository <strong>eventregistration</strong>. See more on the specification of the application functionality later.<br>
<span class="image"><img src="./figs/eventregistration-repo.png" alt="Create new eventregistration repo" width="600"></span></p>
</li>
<li>
<p>Clone it somewhere on your disk. We assume you cloned it to <em>~/git/eventregistration</em>.</p>
</li>
<li>
<p>Navigate to that folder in the terminal: <code>cd ~/git/eventregistration</code>.</p>
</li>
<li>
<p>Create a project for the backend application using Spring Boot CLI in this repository.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">spring init \
 --build=gradle \
 --java-version=1.8 \
 --package=ca.mcgill.ecse321.eventregistration \
 --name=EventRegistration \
 --dependencies=web,data-jpa,postgresql \
 EventRegistration-Backend</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Backslashes in this snippet indicate linebreaks in this one liner command typed in the terminal. You can select and copy-paste this snippet as-is.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Navigate to the <em>EventRegistration-Backend</em> folder</p>
</li>
<li>
<p>For future use, locate the <em>application.properties</em> file in the <em>src/</em> folder and add the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>server.port=${PORT:8080}

spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Source: <a href="https://vkuzel.com/spring-boot-jpa-hibernate-atomikos-postgresql-exception" class="bare">https://vkuzel.com/spring-boot-jpa-hibernate-atomikos-postgresql-exception</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It may be the case that the <code>PostgreSQLDialect</code> needs to be changed for certain database instances (e.g., to <code>PostgreSQL9Dialect</code>).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Locate the Java file containing the main application class (<code>EventRegistrationApplication.java</code>) and add the following content</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.SpringApplication;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.RequestMapping;

@RestController
@SpringBootApplication
public class EventRegistrationApplication {

  public static void main(String[] args) {
    SpringApplication.run(EventRegistrationApplication.class, args);
  }

  @RequestMapping("/")
  public String greeting(){
    return "Hello world!";
  }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that it builds with <code>gradle build -xtest</code>.<br></p>
</li>
<li>
<p>Commit and push the files of the new Spring project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git add .
git status #verify the files that are staged for commit
git commit -m "Initial commit of the backend application"
git push</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_heroku">2.2. Heroku</h3>
<div class="sect3">
<h4 id="_preparations">2.2.1. Preparations</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign up/log in on Heroku by visiting <a href="https://www.heroku.com/" class="bare">https://www.heroku.com/</a>.</p>
</li>
<li>
<p>Install the command line client for Heroku: <a href="https://devcenter.heroku.com/articles/heroku-cli">Heroku CLI</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The Travis client might also be useful at later stages of the course, you can install it from here: <a href="https://github.com/travis-ci/travis.rb#readme">Travis CLI</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Log in to Heroku CLI by opening a terminal an typing: <code>heroku login</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_heroku_app">2.2.2. Creating a Heroku app</h4>
<div class="paragraph">
<p>We are creating a Heroku application and deploying the <em>Hello world!</em> Spring example. Additionally, the steps below will make it possible to store multiple different applications in the same git repository and deploy them individually to Heroku. Steps will be shown through the example EventRegistration application, and should be adapted in the course project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All actions described here for configuring Heroku applications using the Heroku CLI could also be done via the web UI.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once you are logged in with the Heroku-CLI, create a new Heroku application: in the root of the git repository of your repository (assumed to be <em>~/git/eventregistration</em>), issue the below command to create an application named "eventregistration-backend-&lt;UNIQUE_ID&gt;".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>heroku create eventregistration-backend-&lt;UNIQUE_ID&gt; -n</code> <br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Heroku, the application name should be unique Heroku-wise, that is, each application in Heroku&#8217;s system should have a unique name. If you don&#8217;t provide a name parameter for the command, Heroku will randomly generate one.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the <a href="https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-multi-procfile">multi procfile</a> and <a href="https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-gradle">Gradle</a> buildpacks to the app.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">heroku buildpacks:add -a eventregistration-backend-&lt;UNIQUE_ID&gt; https://github.com/heroku/heroku-buildpack-multi-procfile
heroku buildpacks:add -a eventregistration-backend-&lt;UNIQUE_ID&gt; heroku/gradle</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Order is important.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_adding_a_database_to_the_application">2.2.3. Adding a database to the application</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Heroku applications web page and go to <em>Resources</em>, then add the Heroku Postgres add-on.<br>
<span class="image"><img src="./figs/heroku-postgres.png" alt="Heroku Postgres add-on" width="600"></span><br></p>
</li>
<li>
<p>Click the entry for Postgres within the list of add-ons, then go to <em>Settings</em>. You can see the database credentials there.
<span class="image"><img src="./figs/heroku-postgres-credentials.png" alt="Heroku Postgres add-on" width="600"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The credentials are periodically updated and changed by Heroku, so make sure that you are using the actual credentials when manually connecting to the database. (E.g., during manual testing.)
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_extending_the_build_for_the_heroku_deployment_environment">2.2.4. Extending the build for the Heroku deployment environment</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before deploying, a top level <em>build.gradle</em> and <em>settings.gradle</em> need to be created in the root of the repository (i.e., in <em>~/git/eventregistration</em>)<br>
<em>build.gradle</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">task stage () {
    dependsOn ':EventRegistration-Backend:assemble'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>settings.gradle</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">include ':EventRegistration-Backend'</code></pre>
</div>
</div>
</li>
<li>
<p>Generate the Gradle wrapper with the newest Gradle version</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle wrapper --gradle-version 5.6.2</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <em>.gitignore</em> file for the <em>.gradle</em> folder:<br>
<em>.gitignore</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>.gradle/</code></pre>
</div>
</div>
</li>
<li>
<p>Add all new files to git</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git add .
git status #make sure that files in .gradle/ are not added</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected output for <code>git status</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">On branch master
Your branch is ahead of 'origin/master' by 2 commits.
  (use "git push" to publish your local commits)

Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

	new file:   .gitignore
	new file:   build.gradle
	new file:   gradle/wrapper/gradle-wrapper.jar
	new file:   gradle/wrapper/gradle-wrapper.properties
	new file:   gradlew
	new file:   gradlew.bat
	new file:   settings.gradle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Commit changes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git commit -m "Adding Gradle wrapper"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_supply_application_specific_setting_for_heroku">2.2.5. Supply application-specific setting for Heroku</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the <em>EventRegistration-Backend</em> folder, create a file called <em>Procfile</em> (<strong>not</strong> Procfile.txt, name it <strong>exactly</strong> Procfile) with the content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>web: java -jar EventRegistration-Backend/build/libs/EventRegistration-Backend-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
</li>
<li>
<p>Add the Procfile to a new commit</p>
</li>
<li>
<p>Configure the multi-procfile buildpack to find the Procfile:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">heroku config:add PROCFILE=EventRegistration-Backend/Procfile --app eventregistration-backend-&lt;UNIQUE_ID&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_deploying_the_app">2.2.6. Deploying the app</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain and copy the <em>Heroku Git URL</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">heroku git:remote --app eventregistration-backend-&lt;UNIQUE_ID&gt; --remote backend-heroku</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">set git remote backend-heroku to https://git.heroku.com/eventregistration-backend-&lt;UNIQUE_ID&gt;.git</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the <code>backend-heroku</code> remote is successfully added besides <code>origin</code> with <code>git remote -v</code>. Output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">backend-heroku	https://git.heroku.com/eventregistration-backend-123.git (fetch)
backend-heroku	https://git.heroku.com/eventregistration-backend-123.git (push)
origin	git@github.com:imbur/eventregistration.git (fetch)
origin	git@github.com:imbur/eventregistration.git (push)</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy your application with</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git push backend-heroku master</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If it fails to build, make sure you try understanding the output. Typical issue: buildpacks are not added/are not in the right order.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Visit the link provided in the build output. It may take some time (even 30-60 seconds) for the server to answer the first HTTP request, so be patient!</p>
</li>
<li>
<p>Save your work to the GitHub repository, too: <code>git push origin master</code><br>
Final layout of the files (only two directory levels are shown and hidden items are suppressed):<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>~/git/eventregistration
 build.gradle
 EventRegistration-Backend
  build
   classes
   libs
   resources
   tmp
  build.gradle
  gradle
   wrapper
  gradlew
  gradlew.bat
  Procfile
  settings.gradle
  src
      main
      test
 gradle
  wrapper
      gradle-wrapper.jar
      gradle-wrapper.properties
 gradlew
 gradlew.bat
 README.md
 settings.gradle</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_domain_modeling_and_code_generation">2.3. Domain modeling and code generation</h3>
<div class="sect3">
<h4 id="_installing_uml_lab">2.3.1. Installing UML Lab</h4>
<div class="paragraph">
<p>Go to <a href="https://www.uml-lab.com/en/download/">the download page of UML Lab</a> and install it on your machine. To activate it, use the licence key shared in the MyCourses announcement.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By the time of the fourth tutorial, we may not have the license key ready. You should be able to work with a 30-day trial version in this case and activate your license later.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_uml_lab_project_setup">2.3.2. UML Lab project setup</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Once you start UML Lab, there are some useful tutorials that help you learn about the features of the modeling tool. Furthermore, there is an introduction on how to use and configure UML Lab <a href="https://www.clear.rice.edu/comp310/Eclipse/UMLLab/">among the resources of Rice University</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new UML Lab Java project with the name <code>ca.mcgill.ecse321.eventregistration.model</code> with the default project settings.</p>
</li>
<li>
<p>Within the project, create a linked folder (Select Project &#8594; New Folder &#8594; Click Advanced Button &#8594; select "Link to alternate location (linked folder)" option) that points to the <em>src/main/java</em> folder of your <code>Eventregistration-Backend</code> project. Name the folder as <em>src-gen</em>. It will be used as the target for generating model code.<br>
<span class="image"><img src="./figs/link-folder.png" alt="Linking folder" width="600"></span></p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Links to folders will not be versioned, so each team member needs to set this link individually after cloning the project.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Open the <em>ca.mcgill.ecse321.eventregistration.model.umlcd</em> diagram file by double clicking it. It is an empty diagram by default.</p>
</li>
<li>
<p>Click on the empty diagram editor canvas and open the <em>properties view</em> and configure code generation path.<br>
<span class="image"><img src="./figs/umllab-output.png" alt="Codegen output folder" width="600"></span></p>
</li>
<li>
<p>In the same <em>Properties view</em>, apply the <em>Direct &gt; JPA1</em> code style.<br>
<span class="image"><img src="./figs/code-style.png" alt="Code style" width="600"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_domain_modeling_exercise_the_event_registration_system">2.3.3. Domain modeling exercise: the Event Registration System</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <em>Palette</em> on the left hand side of the class diagram editor, create the following package structure and the <code>Person</code> class, and connect them with the <em>Containment</em> line. Once you save the diagram, the code should be generated to the <em>src-gen</em> folder (left part of the figure below).<br>
<span class="image"><img src="./figs/initial-classdiag.png" alt="Class Diagram Packages" width="600"></span></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you disabled the automatic code generation on file save action, then you need to do <em>right click the diagram &#8594; generate code</em> manually.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Study the generated <code>Person</code> class in the <code>ca/mcgill/ecse321/eventregistration/model</code> package (folder)!</p>
</li>
<li>
<p>In the upcoming steps, we will use the <code>java.sql.Time</code> and <code>java.sql.Date</code> data types from the Java Runtime Library, so we need to add them to the model as datatypes.<br>
<span class="image"><img src="./figs/umllab-datatype.png" alt="Adding data types" width="600"></span></p>
</li>
<li>
<p>Extend the diagram by adding more classes and association and composition relations as shown below. Pay extra attention to the navigability and multiplicity of the references.<br>
<span class="image"><img src="./figs/classdiag-complete.png" alt="Class Diagram With Classes" width="600"></span></p>
</li>
<li>
<p>Select attributes to be primary keys (<code>Person</code>: id is <code>name</code>, <code>Event</code>: id is <code>name</code>, <code>Registration</code>: id is <code>id</code>)<br>
<span class="image"><img src="./figs/umllab-primarykey.png" alt="Selecting primary keys" width="600"></span></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Verify the generated code:remove any <code>@OneToOne</code> annotations from getters associated with <code>Date</code> and <code>Time</code> from the <code>Event</code> class.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create an extra <code>int</code> attribute for the <code>RegistrationManager</code> as well and set it as the ID (similarly to the other three classes).<br></p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
If you forget to supply an ID to <strong>any of your entities</strong>, Hibernate will throw an exception and you application will fail to start.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Share the modeling project to git. You can use the command line git client or EGit.<br>
<span class="image"><img src="./figs/umllab-share-project.png" alt="umllab share project" width="600"></span></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_a_spring_based_backend">2.4. Setting up a Spring-based Backend</h3>
<div class="paragraph">
<p>You can download the Spring Tools Suite IDE from <a href="https://spring.io/tools">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_running_the_backend_application_from_eclipse">2.4.1. Running the Backend Application from Eclipse</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Import the <strong>EventRegistration-Backend</strong> Spring Boot project as a Gradle project from <em>File &gt; Import&#8230;&#8203; &gt; Gradle &gt; Existing Gradle project</em> using the default settings. Select the previously generated Spring project folder as the root of the project.<br>
<span class="image"><img src="./figs/gradle-import.png" alt="Gradle project import in Eclipse" width="600"></span></p>
</li>
<li>
<p>Ignore the bin folder.<br>
<span class="image"><img src="./figs/sts-ignore-bin.png" alt="sts ignore bin" width="600"></span></p>
</li>
<li>
<p>Find the <code>EventRegistrationApplication.java</code> source file, then right click and select <em>Run As &gt; Spring Boot App</em>. The application will fail to start, since the database is not yet configured, but this action will create an initial run configuration. Example console output (fragment):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[...]
***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class
[...]</code></pre>
</div>
</div>
</li>
<li>
<p>Obtain the database URL to access the database remotely, e.g., by opening up a terminal and running: <code>heroku run echo \$JDBC_DATABASE_URL --app=&lt;YOUR_BACKEND_APP_NAME&gt;</code>.</p>
</li>
<li>
<p>In Eclipse, open the <em>EventRegistration-Backend - EventregistrationApplication</em> run configuration page and add an environment variable called <code>SPRING_DATASOURCE_URL</code> with the value obtained in the previous step.<br>
<span class="image"><img src="./figs/jdbc-url.png" alt="Adding env var to run config" width="600"></span></p>
</li>
<li>
<p>Add the <code>spring.jpa.hibernate.ddl-auto=update</code> to <code>application.properties</code>. The database content along with the tables this way will be deleted (as necessary) then re-created each time your application starts.<br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
In production, the value of this property should be <code>none</code> (instead of <code>update</code>). Possible values are <code>none</code>, <code>create</code>, <code>validate</code>, and <code>update</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If needed: troubleshooting:</p>
<div class="ulist">
<ul>
<li>
<p>If you get an error message saying something similar to <code>createClob() is not yet implemented</code>, then you can try setting the <code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true</code> variable in your <code>application.properties</code>. It could be a workaround a workaround for an issue with Postgres.<br></p>
</li>
<li>
<p>Sometimes environment variables don&#8217;t work with Spring apps. In this case you can set the <code>spring.datasource.url</code>, the <code>spring.datasource.username</code>, and the <code>spring.datasource.password</code> variables in the application properties as an alternative to setting the <code>SPRING_DATASOURCE_URL</code> environment variable.<br></p>
</li>
<li>
<p>Make sure no other apps are running on <a href="localhost:8080">localhost:8080</a>. You can test it by opening the browser and entering <code>localhost:8080</code> as the address.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_spring_transactions">2.4.2. Spring Transactions</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Verify</strong> the contents of the <code>EventRegistrationApplication</code> class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.SpringApplication;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.RequestMapping;

@RestController
@SpringBootApplication
public class EventRegistrationApplication {

	public static void main(String[] args) {
		SpringApplication.run(EventRegistrationApplication.class, args);
	}

	@RequestMapping("/")
	public String greeting() {
		return "Hello world!";
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new package in <code>src/main/java</code> and name it <code>ca.mcgill.ecse321.eventregistration.dao</code>.</p>
</li>
<li>
<p>Create the <code>EventRegistrationRepository</code> class within this new package</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dao;

import java.sql.Date;
import java.sql.Time;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.TypedQuery;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Event;

@Repository
public class EventRegistrationRepository {

	@Autowired
	EntityManager entityManager;

	@Transactional
	public Person createPerson(String name) {
		Person p = new Person();
		p.setName(name);
		entityManager.persist(p);
		return p;
	}

	@Transactional
	public Person getPerson(String name) {
		Person p = entityManager.find(Person.class, name);
		return p;
	}

	@Transactional
	public Event createEvent(String name, Date date, Time startTime, Time endTime) {
		Event e = new Event();
		e.setName(name);
		e.setDate(date);
		e.setStartTime(startTime);
		e.setEndTime(endTime);
		entityManager.persist(e);
		return e;
	}

	@Transactional
	public Event getEvent(String name) {
		Event e = entityManager.find(Event.class, name);
		return e;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Add a new method that gets all events before a specified date (<code>deadline</code>). Use a typed query created from an SQL command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public List&lt;Event&gt; getEventsBeforeADeadline(Date deadline) {
	TypedQuery&lt;Event&gt; q = entityManager.createQuery("select e from Event e where e.date &lt; :deadline",Event.class);
	q.setParameter("deadline", deadline);
	List&lt;Event&gt; resultList = q.getResultList();
	return resultList;
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To try the methods, you can create a JUnit test under <em>src/test/java</em>. Currently the methods in <code>EventRegistrationRepository</code> directly access the objects stored in the database via the <code>EntityManager</code> instance and these methods should implement both database operations and service business logic (including input validation&#8201;&#8212;&#8201;which we omitted in this part). In later sections, however, we will see how we can easily separate the database access and the service business logic in Spring applications.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_debugging_connecting_to_the_database_using_a_client">2.4.3. Debugging: connecting to the database using a client</h4>
<div class="paragraph">
<p>There are cases when a developer wants to know the contents of the database. In this case, a database client program can be used to access the database schema and table contents. Here are the general steps to access the Postgres database provided by Heroku:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain the database URL to access the database remotely, e.g., by opening up a terminal and running: <code>heroku run echo \$JDBC_DATABASE_URL --app=&lt;YOUR_BACKEND_APP_NAME&gt;</code>.</p>
</li>
<li>
<p>The returned value follows the format that holds all main important parameters that are needed for accessing the database server:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>jdbc:postgresql://&lt;HOST&gt;:&lt;PORT&gt;/&lt;DATABASE_NAME&gt;?user=&lt;USERNAME&gt;&amp;password=&lt;PASSWORD&gt;&amp;sslmode=require</code></pre>
</div>
</div>
<div class="paragraph">
<p>These parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database host: the URL for the server</p>
</li>
<li>
<p>Port: the por on which the DB server is listening</p>
</li>
<li>
<p>Database name: the first section after the URL</p>
</li>
<li>
<p>Username: the first parameter value in the provided URL</p>
</li>
<li>
<p>Password: the second parameter value in the provided URL</p>
</li>
</ul>
</div>
</li>
<li>
<p>With these parameters you can use any Postgres client you prefer to connect to the database. Here is an example for such a connection from Linux using <code>postgres-client</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$&gt; psql postgresql://ec2-54-243-223-245.compute-1.amazonaws.com:5432/d4412g60aaboa7?user=hdjnflfirvkmmr
Password:
psql (10.6 (Ubuntu 10.6-0ubuntu0.18.04.1))
SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
Type "help" for help.

d4412g60aaboa7=&gt; \dt
                          List of relations
 Schema |                Name                | Type  |     Owner
--------+------------------------------------+-------+----------------
 public | event                              | table | hdjnflfirvkmmr
 public | person                             | table | hdjnflfirvkmmr
 public | registration                       | table | hdjnflfirvkmmr
 public | registration_manager               | table | hdjnflfirvkmmr
 public | registration_manager_events        | table | hdjnflfirvkmmr
 public | registration_manager_persons       | table | hdjnflfirvkmmr
 public | registration_manager_registrations | table | hdjnflfirvkmmr
(7 rows)

d4412g60aaboa7=&gt; select * from event ;
 name |    date    | end_time | start_time
------+------------+----------+------------
 e1   | 3899-10-09 | 12:00:00 | 10:00:00
(1 row)

d4412g60aaboa7=&gt; \q
$&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_crud_repositories_and_services">2.5. CRUD Repositories and Services</h3>
<div class="paragraph">
<p>Previously, in the <code>ca.mcgill.ecse321.eventregistration.dao.EventRegistrationRepository</code> class we used an instance of <code>javax.persistence.EntityManager</code> from Hibernate to directly to implement the required operations related to saving/retrieving data to/from a database (Create, Read, Update, and Delete operations, shortly, CRUD).
This section will introduce the Spring framework&#8217;s inbuilt support for such CRUD operations via the <code>org.springframework.data.repository.CrudRepository</code> interface and will show how to use such repositories to implement your use cases in so-called <em>service</em> classes.</p>
</div>
<div class="paragraph">
<p>If you would like to, you can obtain a version of the project that already has the changes from the previous tutorials <a href="https://github.com/McGill-ECSE321-Winter2019/eventregistration">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_creating_a_crud_repository">2.5.1. Creating a CRUD Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new interface <code>PersonRepository</code> in the <code>ca.mcgill.ecse321.eventregistration.dao</code> package and extend the <code>CrudRepository&lt;Person, String&gt;</code> interface</p>
</li>
<li>
<p>Create a new method <code>Person findByName(String name)</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dao;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Person;

public interface PersonRepository extends CrudRepository&lt;Person, String&gt;{

	Person findPersonByName(String name);

}</code></pre>
</div>
</div>
</li>
<li>
<p>Since Spring supports automated JPA Query creation from method names (see <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation">possible language constructs here</a>) <strong>we don&#8217;t need to implement the interface manually</strong>, Spring JPA will create the corresponding queries runtime! This way we don&#8217;t need to write SQL queries either.</p>
</li>
<li>
<p>Create interfaces for the <code>Event</code> and <code>Registration</code> classes as well<br>
<em>EventRepository.java</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dao;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Event;

public interface EventRepository extends CrudRepository&lt;Event, String&gt; {

	Event findEventByName(String name);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>RegistrationRepository.java</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dao;

import java.util.List;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;

public interface RegistrationRepository extends CrudRepository&lt;Registration, Integer&gt; {

	List&lt;Registration&gt; findByPerson(Person personName);

	boolean existsByPersonAndEvent(Person person, Event eventName);

	Registration findByPersonAndEvent(Person person, Event eventName);

}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_services">2.5.2. Implementing Services</h4>
<div class="paragraph">
<p>We implement use-cases in <em>service classes</em> by using the CRUD repository objects for each data type of the domain model.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <em>src/main/java</em>, create a new package <code>ca.mcgill.ecse321.eventregistration.service</code>.</p>
</li>
<li>
<p>In this package, create the <code>EventRegistrationService</code> class as shown below</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.service;

import java.sql.Date;
import java.sql.Time;
import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import ca.mcgill.ecse321.eventregistration.dao.EventRepository;
import ca.mcgill.ecse321.eventregistration.dao.PersonRepository;
import ca.mcgill.ecse321.eventregistration.dao.RegistrationRepository;
import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;

@Service
public class EventRegistrationService {

	@Autowired
	EventRepository eventRepository;
	@Autowired
	PersonRepository personRepository;
	@Autowired
	RegistrationRepository registrationRepository;

	@Transactional
	public Person createPerson(String name) {
		Person person = new Person();
		person.setName(name);
		personRepository.save(person);
		return person;
	}

	@Transactional
	public Person getPerson(String name) {
		Person person = personRepository.findPersonByName(name);
		return person;
	}

	@Transactional
	public List&lt;Person&gt; getAllPersons() {
		return toList(personRepository.findAll());
	}

	@Transactional
	public Event createEvent(String name, Date date, Time startTime, Time endTime) {
		Event event = new Event();
		event.setName(name);
		event.setDate(date);
		event.setStartTime(startTime);
		event.setEndTime(endTime);
		eventRepository.save(event);
		return event;
	}

	@Transactional
	public Event getEvent(String name) {
		Event event = eventRepository.findEventByName(name);
		return event;
	}

	@Transactional
	public List&lt;Event&gt; getAllEvents() {
		return toList(eventRepository.findAll());
	}

	@Transactional
	public Registration register(Person person, Event event) {
		Registration registration = new Registration();
		registration.setId(person.getName().hashCode() * event.getName().hashCode());
		registration.setPerson(person);
		registration.setEvent(event);

		registrationRepository.save(registration);

		return registration;
	}

	@Transactional
	public List&lt;Registration&gt; getAllRegistrations(){
		return toList(registrationRepository.findAll());
	}

	@Transactional
	public List&lt;Event&gt; getEventsAttendedByPerson(Person person) {
		List&lt;Event&gt; eventsAttendedByPerson = new ArrayList&lt;&gt;();
		for (Registration r : registrationRepository.findByPerson(person)) {
			eventsAttendedByPerson.add(r.getEvent());
		}
		return eventsAttendedByPerson;
	}

	private &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable){
		List&lt;T&gt; resultList = new ArrayList&lt;T&gt;();
		for (T t : iterable) {
			resultList.add(t);
		}
		return resultList;
	}

}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_unit_testing_persistence_in_the_backend_service">2.6. Unit Testing Persistence in the Backend Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a fresh Spring Boot project, there is already a single test class <code>EventRegistrationApplicationTests</code> in the <em>src/test/java</em> folder that looks like the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class EventRegistrationApplicationTests {

    @Test
    public void contextLoads() {

    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Run this test that checks if the application can successfully load by <em>right clicking on the class &#8594; Run as&#8230;&#8203; &#8594; JUnit test</em><br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
You need to set the <code>SPRING_DATASOURCE_URL</code> for the test run configuration as well if you use an environment variable to set datasource URL. See step 5 in section 3.3.1.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a new test class <code>ca.mcgill.ecse321.eventregistration.service.TestEventRegistrationService</code> and implement tests for the service</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.service;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

import java.sql.Date;
import java.sql.Time;
import java.time.LocalTime;
import java.time.format.DateTimeFormatter;
import java.util.Calendar;
import java.util.List;

import org.junit.After;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import ca.mcgill.ecse321.eventregistration.dao.EventRepository;
import ca.mcgill.ecse321.eventregistration.dao.PersonRepository;
import ca.mcgill.ecse321.eventregistration.dao.RegistrationRepository;
import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;

@RunWith(SpringRunner.class)
@SpringBootTest
public class TestEventRegistrationService {

	@Autowired
	private EventRegistrationService service;

	@Autowired
	private PersonRepository personRepository;
	@Autowired
	private EventRepository eventRepository;
	@Autowired
	private RegistrationRepository registrationRepository;

	@After
	public void clearDatabase() {
		// Fisrt, we clear registrations to avoid exceptions due to inconsistencies
		registrationRepository.deleteAll();
		// Then we can clear the other tables
		personRepository.deleteAll();
		eventRepository.deleteAll();
	}

	@Test
	public void testCreatePerson() {
		assertEquals(0, service.getAllPersons().size());

		String name = "Oscar";

		try {
			service.createPerson(name);
		} catch (IllegalArgumentException e) {
			// Check that no error occurred
			fail();
		}

		List&lt;Person&gt; allPersons = service.getAllPersons();

		assertEquals(1, allPersons.size());
		assertEquals(name, allPersons.get(0).getName());
	}

	@Test
	public void testCreatePersonNull() {
		assertEquals(0, service.getAllPersons().size());

		String name = null;
		String error = null;

		try {
			service.createPerson(name);
		} catch (IllegalArgumentException e) {
			error = e.getMessage();
		}

		// check error
		assertEquals("Person name cannot be empty!", error);

		// check no change in memory
		assertEquals(0, service.getAllPersons().size());

	}

    // ... other tests

    @Test
	public void testRegisterPersonAndEventDoNotExist() {
		assertEquals(0, service.getAllRegistrations().size());

		String nameP = "Oscar";
		Person person = new Person();
		person.setName(nameP);
		assertEquals(0, service.getAllPersons().size());

		String nameE = "Soccer Game";
		Calendar c = Calendar.getInstance();
		c.set(2016, Calendar.OCTOBER, 16, 9, 00, 0);
		Date eventDate = new Date(c.getTimeInMillis());
		Time startTime = new Time(c.getTimeInMillis());
		c.set(2016, Calendar.OCTOBER, 16, 10, 30, 0);
		Time endTime = new Time(c.getTimeInMillis());
		Event event = new Event();
		event.setName(nameE);
		event.setDate(eventDate);
		event.setStartTime(startTime);
		event.setEndTime(endTime);
		assertEquals(0, service.getAllEvents().size());

		String error = null;
		try {
			service.register(person, event);
		} catch (IllegalArgumentException e) {
			error = e.getMessage();
		}

		// check error
		assertEquals("Person does not exist! Event does not exist!", error);

		// check model in memory
		assertEquals(0, service.getAllRegistrations().size());
		assertEquals(0, service.getAllPersons().size());
		assertEquals(0, service.getAllEvents().size());

	}


    // ... other tests
}</code></pre>
</div>
</div>
</li>
<li>
<p>See the <a href="https://gist.githubusercontent.com/imbur/d8836dc9f44ece65186a43ac80a259fd/raw/b60ddaf6c86860abe119908b139ca087f1f5ff6e/TestEventRegistrationService.java">complete test suite here</a>.</p>
</li>
<li>
<p>Run the tests and interpret the test error messages! You should see only a few (at least one) tests passing.</p>
</li>
<li>
<p>Update the implementation (i.e., replace the current service method codes with the ones provided below) of the following methods with input validation in the <code>EventRegistrationService</code> service class to make the tests pass (Test-Driven Development)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public Person createPerson(String name) {
	if (name == null || name.trim().length() == 0) {
		throw new IllegalArgumentException("Person name cannot be empty!");
	}
	Person person = new Person();
	person.setName(name);
	personRepository.save(person);
	return person;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java\ hljs" data-lang="java\">@Transactional
public Person getPerson(String name) {
    if (name == null || name.trim().length() == 0) {
        throw new IllegalArgumentException("Person name cannot be empty!");
    }
    Person person = personRepository.findPersonByName(name);
    return person;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public Event getEvent(String name) {
    if (name == null || name.trim().length() == 0) {
        throw new IllegalArgumentException("Event name cannot be empty!");
    }
    Event event = eventRepository.findEventByName(name);
    return event;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public Event createEvent(String name, Date date, Time startTime, Time endTime) {
    // Input validation
    String error = "";
    if (name == null || name.trim().length() == 0) {
        error = error + "Event name cannot be empty! ";
    }
    if (date == null) {
        error = error + "Event date cannot be empty! ";
    }
    if (startTime == null) {
        error = error + "Event start time cannot be empty! ";
    }
    if (endTime == null) {
        error = error + "Event end time cannot be empty! ";
    }
    if (endTime != null &amp;&amp; startTime != null &amp;&amp; endTime.before(startTime)) {
        error = error + "Event end time cannot be before event start time!";
    }
    error = error.trim();
    if (error.length() &gt; 0) {
        throw new IllegalArgumentException(error);
    }

    Event event = new Event();
    event.setName(name);
    event.setDate(date);
    event.setStartTime(startTime);
    event.setEndTime(endTime);
    eventRepository.save(event);
    return event;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public Registration register(Person person, Event event) {
    String error = "";
    if (person == null) {
        error = error + "Person needs to be selected for registration! ";
    } else if (!personRepository.existsById(person.getName())) {
        error = error + "Person does not exist! ";
    }
    if (event == null) {
        error = error + "Event needs to be selected for registration!";
    } else if (!eventRepository.existsById(event.getName())) {
        error = error + "Event does not exist!";
    }
    if (registrationRepository.existsByPersonAndEvent(person, event)) {
        error = error + "Person is already registered to this event!";
    }
    error = error.trim();

    if (error.length() &gt; 0) {
        throw new IllegalArgumentException(error);
    }

    Registration registration = new Registration();
	registration.setId(person.getName().hashCode() * event.getName().hashCode());
    registration.setPerson(person);
    registration.setEvent(event);

    registrationRepository.save(registration);

    return registration;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public List&lt;Event&gt; getEventsAttendedByPerson(Person person) {
    if (person == null ) {
        throw new IllegalArgumentException("Person cannot be null!");
    }
    List&lt;Event&gt; eventsAttendedByPerson = new ArrayList&lt;&gt;();
    for (Registration r : registrationRepository.findByPerson(person)) {
        eventsAttendedByPerson.add(r.getEvent());
    }
    return eventsAttendedByPerson;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the tests again, and all should be passing this time.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_creating_restful_web_services_in_spring">2.7. Creating RESTful Web Services in Spring</h3>
<div class="paragraph">
<p>Previously, we used CRUD repository objects for each data type of the domain model and implemented use-cases in service classes. In this section, we will Implement REST API for eventregistration (people, events and registrations) and expose Sping Data.</p>
</div>
<div class="paragraph">
<p>If you would like to, you can obtain a version of the project that already has the changes from the previous tutorials <a href="https://github.com/McGill-ECSE321-Winter2019/eventregistration">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_preliminaries_2">2.7.1. Preliminaries</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set database URL to start application and accessing the database remotey. You can do the same by either adding an environment variable called <code>SPRING_DATASOURCE_URL</code> or by specifying <code>spring.datasource.url</code>, <code>spring.datasource.username</code>, and <code>spring.datasource.password</code> in <em>src/main/resources/application.properties</em>.</p>
</li>
<li>
<p>Add the dependency 'spring-boot-starter-data-rest' in <em>build.gradle</em> file of your backend. It is required to expose Spring Data repositories over REST using Spring Data REST.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation 'org.springframework.boot:spring-boot-starter-data-rest'
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
implementation 'org.springframework.boot:spring-boot-starter-web'

runtimeOnly 'org.postgresql:postgresql'
testImplementation 'org.springframework.boot:spring-boot-starter-test'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_building_a_restful_web_service">2.7.2. Building a RESTful Web Service</h4>
<div class="paragraph">
<p>We will discuss two ways to build RESTful web service for our Spring Boot project.</p>
</div>
<div class="sect4">
<h5 id="_building_a_restful_web_service_using_controller_and_dtos">Building a RESTful Web Service Using Controller and DTOs</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We will first create a new package in EventRegistration-Backend and then create EventRegistrationRestController class inside it. We have added the annotation <code>@RestController</code>
above the controller class so that HTTP requests are handled by EventRegistrationRestController. In addition, we enabled the Cross-Origin Resource Sharing at the controller level using '@CrossOrigin' notation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.controller;

@CrossOrigin(origins = "*")
@RestController
public class EventRegistrationRestController {
}</code></pre>
</div>
</div>
</li>
<li>
<p>We further create another package ca.mcgill.ecse321.eventregistration.dto and create the below files inside that package. First we create EventDto.java.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dto;

import java.sql.Date;
import java.sql.Time;

public class EventDto {

	private String name;
	private Date eventDate;
	private Time startTime;
	private Time endTime;

	public EventDto() {
	}

	public EventDto(String name) {
		this(name, Date.valueOf("1971-01-01"), Time.valueOf("00:00:00"), Time.valueOf("23:59:59"));
	}

	public EventDto(String name, Date eventDate, Time startTime, Time endTime) {
		this.name = name;
		this.eventDate = eventDate;
		this.startTime = startTime;
		this.endTime = endTime;
	}

	public String getName() {
		return name;
	}

	public Date getEventDate() {
		return eventDate;
	}

	public Time getStartTime() {
		return startTime;
	}

	public Time getEndTime() {
		return endTime;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Next, we create <code>PersonDto</code> Java class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dto;

import java.util.Collections;
import java.util.List;

public class PersonDto {

	private String name;
	private List&lt;EventDto&gt; events;

	public PersonDto() {
	}

	@SuppressWarnings("unchecked")
	public PersonDto(String name) {
		this(name, Collections.EMPTY_LIST);
	}

	public PersonDto(String name, List&lt;EventDto&gt; arrayList) {
		this.name = name;
		this.events = arrayList;
	}

	public String getName() {
		return name;
	}

	public List&lt;EventDto&gt; getEvents() {
		return events;
	}

	public void setEvents(List&lt;EventDto&gt; events) {
		this.events = events;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, we create <code>RegistrationDto</code> Java class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.dto;

public class RegistrationDto {

	private PersonDto person;
	private EventDto event;

	public RegistrationDto() {
	}

	public RegistrationDto(PersonDto person, EventDto event) {
		this.person = person;
		this.event = event;
	}

	public PersonDto getperson() {
		return person;
	}

	public void setperson(PersonDto person) {
		this.person = person;
	}

	public EventDto getEvent() {
		return event;
	}

	public void setEvent(EventDto event) {
		this.event = event;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Now, we will add the methods in the controller class. Also, we will add annotaions to map web requests.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">	@PostMapping(value = { "/persons/{name}", "/persons/{name}/" })
	public PersonDto createPerson(@PathVariable("name") String name) throws IllegalArgumentException {
		// @formatter:on
		Person person = service.createPerson(name);
		return convertToDto(person);
	}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>@RequestMapping annotation is used to map web requests to Spring Controller methods. Since, @RequestMapping maps all HTTP operations by default. We can use @GetMapping, @PostMapping and so forth to narrow this mapping.</p>
</div>
<div class="paragraph">
<p>Moreover, in the above snippet, we use "value" and @PathVariable to bind the value of the query string parameter name into the name parameter of the createPerson() method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can add other methods similarly with appropriate mappings.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PostMapping(value = { "/events/{name}", "/events/{name}/" })
public EventDto createEvent(@PathVariable("name") String name, @RequestParam Date date,
@RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.TIME, pattern = "HH:mm") LocalTime startTime,
@RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.TIME, pattern = "HH:mm") LocalTime endTime)
throws IllegalArgumentException {
	Event event = service.createEvent(name, date, Time.valueOf(startTime), Time.valueOf(endTime));
	return convertToDto(event);
}

@GetMapping(value = { "/events", "/events/" })
public List&lt;EventDto&gt; getAllEvents() {
	List&lt;EventDto&gt; eventDtos = new ArrayList&lt;&gt;();
	for (Event event : service.getAllEvents()) {
		eventDtos.add(convertToDto(event));
	}
	return eventDtos;
}

@PostMapping(value = { "/register", "/register/" })
public RegistrationDto registerPersonForEvent(@RequestParam(name = "person") PersonDto pDto,
	@RequestParam(name = "event") EventDto eDto) throws IllegalArgumentException {
	Person p = service.getPerson(pDto.getName());
	Event e = service.getEvent(eDto.getName());

	Registration r = service.register(p, e);
	return convertToDto(r, p, e);
}

@GetMapping(value = { "/registrations/person/{name}", "/registrations/person/{name}/" })
public List&lt;EventDto&gt; getEventsOfPerson(@PathVariable("name") PersonDto pDto) {
	Person p = convertToDomainObject(pDto);
	return createEventDtosForPerson(p);
}

@GetMapping(value = { "/events/{name}", "/events/{name}/" })
public EventDto getEventByName(@PathVariable("name") String name) throws IllegalArgumentException {
	return convertToDto(service.getEvent(name));
}

private EventDto convertToDto(Event e) {
	if (e == null) {
		throw new IllegalArgumentException("There is no such Event!");
	}
	EventDto eventDto = new EventDto(e.getName(),e.getDate(),e.getStartTime(),e.getEndTime());
	return eventDto;
}

private PersonDto convertToDto(Person p) {
	if (p == null) {
		throw new IllegalArgumentException("There is no such Person!");
	}
	PersonDto personDto = new PersonDto(p.getName());
	personDto.setEvents(createEventDtosForPerson(p));
	return personDto;
}

private RegistrationDto convertToDto(Registration r, Person p, Event e) {
	EventDto eDto = convertToDto(e);
	PersonDto pDto = convertToDto(p);
	return new RegistrationDto(pDto, eDto);
}

private Person convertToDomainObject(PersonDto pDto) {
	List&lt;Person&gt; allPersons = service.getAllPersons();
	for (Person person : allPersons) {
		if (person.getName().equals(pDto.getName())) {
			return person;
		}
	}
	return null;
}

private List&lt;EventDto&gt; createEventDtosForPerson(Person p) {
	List&lt;Event&gt; eventsForPerson = service.getEventsAttendedByPerson(p);
	List&lt;EventDto&gt; events = new ArrayList&lt;&gt;();
	for (Event event : eventsForPerson) {
		events.add(convertToDto(event));
	}
	return events;
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test_the_service">2.7.3. Test the Service</h4>
<div class="paragraph">
<p>We can test the application using, e.g., the RESTClient browser plugin, Advanced Rest Client, Postman or curl.</p>
</div>
<div class="paragraph">
<p>Once you launch the client, you can specify the path and select the method as shown in the below figures.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/RestClient1.png" alt="Post method on REST Client" width="1000"></span></p>
</div>
<div class="paragraph">
<p>Once we use POST, the record is persisted and then we can use the GET method to retrive the same.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/RestClient2.png" alt="GET method on REST Client" width="1000"></span></p>
</div>
<div class="paragraph">
<p>Similary, we can test the other methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spring_data_an_alternative_to_exposing_the_database">2.7.4. Spring Data - an Alternative to Exposing the Database</h4>
<div class="paragraph">
<p>The advantage of using Spring Data Rest is that it can remove a lot of boilerplate thats natural to REST services. Spring would automatically create endpoints like /events, /people as we saw above and these endpoints can be further customized.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We have already added the dependency 'spring-boot-starter-data-rest' in preliminary section to to expose Spring Data repositories over REST using Spring Data REST.</p>
</li>
<li>
<p>Next, we can go to repository interfaces and add @RepositoryRestResource annotaion.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RepositoryRestResource(collectionResourceRel = "participants", path = "participants")
public interface PersonRepository extends CrudRepository&lt;Person, String&gt;{

	Person findPersonByName(String name);

}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, we can access this REST API in the browser or REST Client and will receive the JSON as shown below.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/RestClient3.png" alt="Post method on REST Client" width="1000"></span></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_backend_services">2.8. Testing Backend Services</h3>
<div class="paragraph">
<p>We implement a first unit test for testing the application service logic.</p>
</div>
<div class="sect3">
<h4 id="preparations">2.8.1. Preparations</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the project and ensure that you add <em>JUnit 5</em> and <em>Mockito 2+</em> to the project dependencies in <code>build.gradle</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
  // Add these lines to the dependency configuration, don't replace the existing dependencies
  	testImplementation "junit:junit:4.12"
  	testRuntime('org.junit.jupiter:junit-jupiter-engine:5.3.1')
    testImplementation('org.mockito:mockito-core:2.+')
  	testImplementation('org.mockito:mockito-junit-jupiter:2.18.3')
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Finding configuration settings for your Gradle/Maven project is very simple by searaching for them on MVNRepository: <a href="https://mvnrepository.com/" class="bare">https://mvnrepository.com/</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If you also would like to run your project from Eclipse, add an additional dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>testImplementation group: 'org.junit.platform', name: 'junit-platform-launcher', version: "1.3.1"</code></pre>
</div>
</div>
</li>
<li>
<p>Create a test class (in case you don&#8217;t already have one) <code>EventregistrationServiceTests</code> in the corresponding package under <code>src/test/java</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

@RunWith(MockitoJUnitRunner.class)
public class EventregistrationServiceTests {

}</code></pre>
</div>
</div>
</li>
<li>
<p>Build your project to ensure its dependencies are correctly loaded.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_writing_tests">2.8.2. Writing tests</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, update/optimize the <code>createPerson</code> service method:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional
public Person createPerson(String name) {
  if (name == null || name == "") {
    throw new IllegalArgumentException("Person name cannot be empty!");
  }
  Person person = personRepository.findPersonByName(name);
  if ( person == null ) {
    person = new Person();
    person.setName(name);
    personRepositroy.save(person);
  }
  return person;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following imports to the test class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.springframework.boot.test.context.SpringBootTest;
import ca.mcgill.ecse321.eventregistration.dao.EventRepository;
import ca.mcgill.ecse321.eventregistration.dao.PersonRepository;
import ca.mcgill.ecse321.eventregistration.dao.RegistrationRepository;
import ca.mcgill.ecse321.eventregistration.service.EventRegistrationService;
import org.mockito.invocation.InvocationOnMock;
import org.springframework.test.context.junit4.SpringRunner;
import ca.mcgill.ecse321.eventregistration.controller.EventRegistrationRestController;
import ca.mcgill.ecse321.eventregistration.model.Person;</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following static imports for methods:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.mockito.ArgumentMatchers.anyString;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;</code></pre>
</div>
</div>
</li>
<li>
<p>Create the DAO mock for person</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mock
private PersonRepository personDao;

@InjectMocks
private EventRegistrationService service;

private static final String PERSON_KEY = "TestPerson";
private static final String NONEXISTING_KEY = "NotAPerson";

@Before
public void setMockOutput() {
	when(personDao.findPersonByName(anyString())).thenAnswer( (InvocationOnMock invocation) -&gt; {
		if(invocation.getArgument(0).equals(PERSON_KEY)) {
			Person person = new Person();
			person.setName(PERSON_KEY);
			return person;
		} else {
			return null;
		}
	});
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add test cases</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testCreatePerson() {
	assertEquals(0, service.getAllPersons().size());

	String name = "Oscar";

	try {
		person = service.createPerson(name);
	} catch (IllegalArgumentException e) {
		// Check that no error occurred
		fail();
	}

	assertEquals(name, person.getName());
}

@Test
public void testCreatePersonNull() {
	String name = null;
	String error = null;

	try {
		person = service.createPerson(name);
	} catch (IllegalArgumentException e) {
		error = e.getMessage();
	}

	// check error
	assertEquals("Person name cannot be empty!", error);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the tests with <code>gradle test</code> from the command line in the root of the project, or in Eclipse, right click on the test class name then select <em>Run As&#8230;&#8203; &gt; JUnit test</em>.<br>
<span class="image"><img src="./figs/junit-test-eclipse-output.png" alt="Eclipse JUnit output"></span></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_code_coverage_using_eclemma">2.9. Code Coverage using EclEmma</h3>
<div class="paragraph">
<p>This tutorial covers the basics of EclEmma and retrieves code coverage metrics using it.</p>
</div>
<div class="sect3">
<h4 id="_preliminary">2.9.1. Preliminary</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install EclEmma as a plugin in your Eclipse IDE from <a href="https://www.eclemma.org/installation.html">here</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_gradle_project">2.9.2. Creating a Gradle Project</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We will create a Gradle project from scratch and be testing a simple method <em>returnAverage(int[], int, int, int)</em> .
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Gradle project in Eclipse by clicking on <em>File</em> &gt; <em>New</em> &gt; <em>Other</em><br>
<span class="image"><img src="./figs/pit-testing-fig-1.png" alt="New Project"></span></p>
</li>
<li>
<p>Under <em>Gradle</em>, choose Gradle Project<br>
<span class="image"><img src="./figs/pit-testing-fig-2.png" alt="New Gradle Project"></span></p>
</li>
<li>
<p>Click on <em>Next</em>, then name your project <em>tutorial7</em>, click on <em>Finish</em><br>
<span class="image"><img src="./figs/pit-testing-fig-3.png" alt="Project Name"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The project may take some time to be created.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a new package instead of the default ones for both the source and test folders (e.g <code>ca.mcgill.ecse321.tutorial7</code>) and move the default generated classes (<code>Library</code> and <code>LibraryTest</code>) to this package.<br>
<span class="image"><img src="./figs/pit-testing-fig-4.png" alt="Create Packages"></span></p>
</li>
<li>
<p>Change the code in the <code>Library</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.tutorial7;

public class Library {

	public static double returnAverage(int value[], int arraySize, int MIN, int MAX) {
		int index, ti, tv, sum;
		double average;
		index = 0;
		ti = 0;
		tv = 0;
		sum = 0;
		while (ti &lt; arraySize &amp;&amp; value[index] != -999) {
			ti++;
			if (value[index] &gt;= MIN &amp;&amp; value[index] &lt;= MAX) {
				tv++;
				sum += value[index];
			}
			index++;
		}
		if (tv &gt; 0)
			average = (double) sum / tv;
		else
			average = (double) -999;
		return average;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Change the code in the <code>LibraryTest</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.tutorial7;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class LibraryTest {

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest1() {
		int[] value = {5, 25, 15, -999};
		int AS = 4;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(15, average, 0.1);
	}

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest2() {
		int[] value = {};
		int AS = 0;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(-999.0, average, 0.1);
	}
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_retrieving_test_coverage_metrics">2.9.3. Retrieving Test Coverage Metrics</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We can straightforwardly manage code coverage using JaCoCo inside Eclipse with no configuration if we are using EclEmma Eclipse plugin.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the Test in coverage mode using Eclemma. Click on <em>LibraryTest</em>, <em>Coverage As</em>, <em>1 JUnit Test</em><br>
<span class="image"><img src="./figs/pit-testing-fig-5.png" alt="Full Branch Coverage"></span></p>
</li>
<li>
<p>Verify that we have 100% branch coverage.<br>
<span class="image"><img src="./figs/pit-testing-fig-6.png" alt="Full Branch Coverage-Eclemma"></span></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_frontend">3. Web Frontend</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_installation_instructions_vue_js">3.1. Installation Instructions: Vue.js</h3>
<div class="paragraph">
<p><a href="https://vuejs.org/v2/guide/">Vue.js</a> is a popular web frontend for building
user interfacs in Javascript, which is considered to be easier to learn compared to <a href="https://reactjs.org/">React</a> and
<a href="https://angular.io/">Angular</a>.</p>
</div>
<div class="sect3">
<h4 id="_install_vue_js">3.1.1. Install Vue.js</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a shell (or run <strong>cmd.exe</strong> in Windows)</p>
</li>
<li>
<p>Check that you successfully installed <strong>node.js</strong> and <strong>npm</strong> e.g. by checking their versions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ node -v
v8.10.0
$ npm -v
3.5.2</code></pre>
</div>
</div>
</li>
<li>
<p>Install the command line interface (CLI) for Vue: <code>sudo npm install --global vue-cli</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_generate_initial_vue_js_project_content">3.1.2. Generate initial Vue.js project content</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your local Git repository of the Event Registration System</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd ~/git/eventregistration</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate initial content as follows</p>
<div class="ulist">
<ul>
<li>
<p>Hit <kbd>Enter</kbd> after each line if not indicated otherwise</p>
</li>
<li>
<p>Detailed instructions at <a href="https://github.com/vuejs-templates/webpack" class="bare">https://github.com/vuejs-templates/webpack</a> and <a href="https://bootstrap-vue.js.org/docs" class="bare">https://bootstrap-vue.js.org/docs</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ vue init bootstrap-vue/webpack eventregistration-frontend
? Project name (EventRegistration-Frontend) EventRegistration-Frontend
? Project description (A Vue.js project) A Vue.js frontend for Event Registration App
? Author (varrodan &lt;daniel.varro@gmail.com&gt;)
? Vue build (Use arrow keys):
&gt; Runtime + Compiler
  Runtime-only
? Install vue-router (Y/n): Y
? Use ESLint to lint your code (Y/n): n
? Setup unit tests with Karma + Mocha (Y/n) n
? Setup e2e tests with Nightwatch (Y/n) Y

vue-cli  Generated "EventRegistration-Frontend".</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Now execute the following commands (one after the other)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd EventRegistration-Frontend
$ npm install
$ npm run dev</code></pre>
</div>
</div>
</li>
<li>
<p>As a result A sample web page should appear at <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a></p>
</li>
<li>
<p>You can stop this development server by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span> in the shell</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_install_additional_dependencies">3.1.3. Install additional dependencies</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install JQuery and Axios (we will use these dependencies for issuing REST API calls):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm install --save axios
npm install --save jquery</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_your_development_server">3.1.4. Setting up your development server</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We change the default port to <strong>8087</strong> (instead of the default 8080) and
the default IP address by using a configuration file.
The rationale behind this step is that other Tomcat servers may already listen at
the default localhost:8080 port which may clash with our development server.</p>
</li>
<li>
<p>Open <strong>./config/index.js</strong> and add <code>port: 8087</code> to <code>module.exports</code>
(both <code>build</code> and <code>dev</code> part)</p>
<div class="ulist">
<ul>
<li>
<p>The development server is set up at localhost, i.e. <a href="http://127.0.0.1:8087" class="bare">http://127.0.0.1:8087</a></p>
</li>
<li>
<p>The production server is set up in accordance with the virtual machines</p>
</li>
<li>
<p>We also store the host IP address and port of the backend server
in similar environment variables (<code>backendHost</code> and <code>backendPort</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  build: {
    env: require('./prod.env'),
    host: 'eventregistration-frontend-123.herokuapp.com',
    port: 443,
    backendHost: 'eventregistration-backend-123.herokuapp.com',
    backendPort: 443,
    //...
  },
  dev: {
    env: require('./dev.env'),
    host: '127.0.0.1',
    port: 8087,
    backendHost: '127.0.0.1',
    backendPort: 8080,
    //...
  }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open <strong>./build/dev-server.js</strong>, and change the <code>uri</code> assignment as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The original line of code can be commented or deleted.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">//var uri = 'http://localhost:' + port
var host = config.dev.host
var uri = 'http://' + host + ':' + port</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Start again your development server by <code>npm run dev</code>.
The same web application should now appear at <a href="http://127.0.0.1:8087/" class="bare">http://127.0.0.1:8087/</a></p>
</li>
<li>
<p>Stop the development server by <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_commit_your_work_to_github">3.1.5. Commit your work to Github</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If everything works then commit your work to your Github repository.</p>
</li>
<li>
<p>Notice that many libraries and files are omitted, which is intentional. Check the <code>.gitignore</code> file for details.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_static_vue_js_component">3.2. Create a Static Vue.js Component</h3>
<div class="paragraph">
<p>Vue.js promotes the use of <a href="https://vuejs.org/v2/guide/components.html">components</a>
which encapsulate GUI elements and their behavior in order to build up rich user interfaces in a modular way. A component consists of</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>template</strong>: A template of (a part of) an HTML document enriched with
data bindings, conditional expressions, loops, etc.</p>
</li>
<li>
<p><strong>script</strong>: The behavior of the user interface programmed in JavaScript.</p>
</li>
<li>
<p><strong>style</strong>: The customized graphical appearance of HTML document elements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will first create a new Vue.js component and then connect it to a backend
Java Spring service via a Rest API call.</p>
</div>
<div class="sect3">
<h4 id="_create_a_component_file">3.2.1. Create a component file</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We use <code>.</code> below to refer to the <code>EventRegistration-Frontend</code> directory.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new file <strong>EventRegistration.vue</strong> in <strong>./src/components</strong> with  the
following initial content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;template&gt;
&lt;/template&gt;
&lt;script&gt;
&lt;/script&gt;
&lt;style&gt;
&lt;/style&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Create some static HTML content of the template part starting with a <code>&lt;div&gt;</code> element
corresponding to your component. We</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;template&gt;
  &lt;div id="eventregistration"&gt;
    &lt;h2&gt;People&lt;/h2&gt;
    &lt;table&gt;
      &lt;tr&gt;
          &lt;td&gt;John&lt;/td&gt;
          &lt;td&gt;Event to attend&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;
              &lt;input type="text" placeholder="Person Name"&gt;
          &lt;/td&gt;
          &lt;td&gt;
              &lt;button&gt;Create&lt;/button&gt;
          &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;p&gt;
      &lt;span style="color:red"&gt;Error: Message text comes here&lt;/span&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Customize the <code>&lt;style&gt;</code> part with your designated CSS content. A detailed
CSS reference documentation is available at <a href="https://www.w3schools.com/CSSref/" class="bare">https://www.w3schools.com/CSSref/</a>.
The final result of that part should like as follows.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-HTML hljs" data-lang="HTML">&lt;style&gt;
  #eventregistration {
    font-family: 'Avenir', Helvetica, Arial, sans-serif;
    color: #2c3e50;
    background: #f2ece8;
  }
&lt;/style&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_new_routing_command">3.2.2. Create a new routing command</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We need to route certain HTTP calls to a specific URL to be handled by
<strong>EventRegistration.vue</strong>.</p>
</li>
<li>
<p>Open  <strong>./src/router/index.js</strong> and add a new route by extending the existing
<code>routes</code> property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">export default new Router({
  routes: [
    {
      path: '/',
      name: 'Hello',
      component: Hello
    },
    {
      path: '/app',
      name: 'EventRegistration',
      component: EventRegistration
    }
  ]
})</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You should not change the number of spaces used as indentation otherwise you get error messages, if you have LInt enabled in your project.</p>
</li>
<li>
<p>Import the new component <code>EventRegistration.vue</code> at the beginning of <strong>./src/router/index.js</strong> after all existing imports!</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// add import after all existing imports
import EventRegistration from '@/components/EventRegistration'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Start the development server and navigate your browser to <a href="http://127.0.0.1:8087/#/app" class="bare">http://127.0.0.1:8087/#/app</a>.
Your new Vue.js component should be rendered (with the static HTML content).</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_vue_js_components_with_dynamic_content">3.3. Vue.js Components with Dynamic Content</h3>
<div class="sect3">
<h4 id="_add_data_and_event_handlers">3.3.1. Add data and event handlers</h4>
<div class="paragraph">
<p>Next we add event handling and dynamic content to our EventRegistration.vue component.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create another file <strong>registration.js</strong> in the same folder which will contain
the Javascript code for the EventRegistration.vue component.</p>
</li>
<li>
<p>Create constructor methods:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function PersonDto (name) {
  this.name = name
  this.events = []
}

function EventDto (name, date, start, end) {
  this.name = name
  this.eventDate = date
  this.startTime = start
  this.endTime = end
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add data variables to the export declaration of the component.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">export default {
  name: 'eventregistration',
  data () {
    return {
      people: [],
      newPerson: '',
      errorPerson: '',
      response: []
    }
  },
  //...
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add an initialization function below the data part.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">created: function () {
  // Test data
  const p1 = new PersonDto('John')
  const p2 = new PersonDto('Jill')
  // Sample initial content
  this.people = [p1, p2]
},</code></pre>
</div>
</div>
</li>
<li>
<p>Add event handling method  <strong>createPerson()</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">methods: {
  createPerson: function (personName) {
    // Create a new person and add it to the list of people
    var p = new PersonDto(personName)
    this.people.push(p)
    // Reset the name field for new people
    this.newPerson = ''
  }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_dynamic_data_bindings">3.3.2. Create dynamic data bindings</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>EventRegistration.vue</code> and link the Javascript file as script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;script src="./registration.js"&gt;
&lt;/script&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Change the static template content for the person list to dynamic bindings:</p>
<div class="ulist">
<ul>
<li>
<p>We iterate along all people in data property <code>people</code> and
dynamically print their name by <code>{{ person.name }}</code> (see <a href="https://vuejs.org/v2/guide/list.html">list rendering</a>)</p>
</li>
<li>
<p>We print the (currently empty) list of events to which a person is registered to.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;table&gt;
  &lt;tr v-for="person in people" &gt;
      &lt;td&gt;{{ person.name }}&lt;/td&gt;
      &lt;td&gt;
        &lt;ul&gt;
          &lt;li v-for="event in person.events"&gt;
            {{event.name}}
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
  &lt;/tr&gt;
&lt;!-- ... --&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Link input field content with data variable <code>newPerson</code> and
button clicks for <strong>Create Person</strong> for event handler method  <code>createPerson()</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;table&gt;
  &lt;!-- ... --&gt;
  &lt;tr&gt;
    &lt;td&gt;
        &lt;input type="text" v-model="newPerson" placeholder="Person Name"&gt;
    &lt;/td&gt;
    &lt;td&gt;
        &lt;button @click="createPerson(newPerson)"&gt;Create Person&lt;/button&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Bind the error message to the corresponding variable <code>errorPerson</code>
by extending the <code>&lt;span&gt;</code> tag with <a href="https://vuejs.org/v2/guide/conditional.html">conditional rendering</a>.</p>
<div class="ulist">
<ul>
<li>
<p>The error message will only appear if the data property <code>errorPerson</code> is not empty.</p>
</li>
<li>
<p>You may wish to further refine error handling in case of empty string content
for <code>newPerson</code>  by adding <code>&amp;&amp; !newPerson</code> to the condition.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;span v-if="errorPerson" style="color:red"&gt;Error: {{errorPerson}} &lt;/span&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Run your frontend application and observe that two people are listed.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_calling_backend_services">3.4. Calling Backend Services</h3>
<div class="paragraph">
<p>Next we change our frontend to issue calls to the backend via the Rest API provided
by the Java Spring framework. Please refer to the section 3.6.2 where we enabled the Cross-Origin Resource Sharing at the controller level using '@CrossOrigin' notation.</p>
</div>
<div class="sect3">
<h4 id="_calling_backend_services_in_from_vue_js_components">3.4.1. Calling backend services in from Vue.js components</h4>
<div class="paragraph">
<p>We need to modify our frontend to make calls to backend services.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <strong>registration.js</strong> and add the following content to the beginning:</p>
<div class="ulist">
<ul>
<li>
<p>Note that instead of hard-wired IP addresses and ports, details are given in
a configuration file.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">import axios from 'axios'
var config = require('../../config')

var frontendUrl = 'http://' + config.dev.host + ':' + config.dev.port
var backendUrl = 'http://' + config.dev.backendHost + ':' + config.dev.backendPort

var AXIOS = axios.create({
  baseURL: backendUrl,
  headers: { 'Access-Control-Allow-Origin': frontendUrl }
})</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Now navigate to the <strong>created</strong> function, and replace existing content
with the following lines:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">created: function () {
  // Initializing people from backend
    AXIOS.get(`/persons`)
    .then(response =&gt; {
      // JSON responses are automatically parsed.
      this.people = response.data
    })
    .catch(e =&gt; {
      this.errorPerson = e;
    });
}</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to the <strong>createPerson()</strong> method and change its content as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">createPerson: function (personName) {
  AXIOS.post(`/persons/`+personName, {}, {})
  .then(response =&gt; {
    // JSON responses are automatically parsed.
    this.people.push(response.data)
    this.newPerson = ''
    this.errorPerson = ''
  })
  .catch(e =&gt; {
    var errorMsg = e.message
    console.log(errorMsg)
    this.errorPerson = errorMsg
  });
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the frontend application and check that</p>
<div class="ulist">
<ul>
<li>
<p>New people can be added</p>
</li>
<li>
<p>They immediately appear in the people list.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_and_travis_ci">3.5. Build and Travis-CI</h3>
<div class="paragraph">
<p>The project should build using <code>npm run build</code>. This will create a <em>build/</em> directory in the frontend folder, where you can run the frontend server using <code>node build/dev-server.js</code>.</p>
</div>
<div class="paragraph">
<p>Travis-CI supports <a href="https://docs.travis-ci.com/user/languages/javascript-with-nodejs">building nodejs projects</a>. However, we do not want to run the default <code>npm test</code> command. Instead, the build should do <code>npm install</code> and <code>npm run build</code> only.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_additional_steps_in_the_tutorial">3.6. Additional steps in the tutorial</h3>
<div class="sect3">
<h4 id="_steps_to_complete">3.6.1. Steps to complete</h4>
<div class="paragraph">
<p>The description of the next steps is intentionally high-level and sketchy to force you
to face and solve several emerging problems.</p>
</div>
<div class="paragraph">
<p>You need to provide the following functionality by extending the Vue.js component:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>List all events (name, date, startTime, endTime)</strong></p>
<div class="ulist">
<ul>
<li>
<p>Introduce an array <strong>events</strong> in the frontend data store</p>
</li>
<li>
<p>Call the appropriate backend service to fill the contents</p>
</li>
<li>
<p>Provide a dynamic list in the component and bind it to <strong>events</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Create a new event (name, date, startTime, endTime)</strong></p>
<div class="ulist">
<ul>
<li>
<p>Introduce an object <strong>newEvent</strong> in the frontend data store with four properties
(e.g. name, date, startTime, endTime).</p>
<div class="ulist">
<ul>
<li>
<p>Set the initial values of these properties to something</p>
</li>
</ul>
</div>
</li>
<li>
<p>Provide a button to initiate creating a new event</p>
</li>
<li>
<p>Provide HTML input fields to set event details</p>
</li>
<li>
<p>Create a call to the appropriate backend service, i.e. <strong>createEvent()</strong></p>
</li>
<li>
<p>Introduce an object <strong>errorEvent</strong> for error message related to event creation</p>
</li>
<li>
<p>Provide corresponding HTML field for displaying the error message (e.g. <code>&lt;span&gt;</code>), and set
its appearance condition to the content of the error message</p>
</li>
<li>
<p><strong>Hint</strong>: you can use the following input types for setting date and time</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;input type="date" v-model="newEvent.eventDate" placeholder="YYYY-MM-DD"&gt;
&lt;input type="time" v-model="newEvent.startTime" placeholder="HH:mm"&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Register a person to an event</strong> (when a new event should occur in the
list of events printed next to a person)</p>
<div class="ulist">
<ul>
<li>
<p>Provide a selection of people</p>
<div class="ulist">
<ul>
<li>
<p>You need a corresponding data variable (e.g. <strong>selectedPerson</strong>)</p>
</li>
<li>
<p>You can use the HTML <code>&lt;select v-model="selectedPerson"&gt;</code> tag where each
option (<code>&lt;option&gt;</code> tag with <code>v-for</code> Vue.js parameter) is filled dynamically from
the list of people.</p>
</li>
<li>
<p><strong>Hint:</strong> You can add a first disabled option as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;option disabled value=""&gt;Please select one&lt;/option&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Provide a selection of events in a similar way.</p>
</li>
<li>
<p>Provide a button to initiate registration</p>
</li>
<li>
<p>Enable the button only if both a person and an event are selected</p>
</li>
</ul>
</div>
</li>
<li>
<p>In all use cases,</p>
<div class="ulist">
<ul>
<li>
<p>Report application specific errors if the backend service fails</p>
</li>
<li>
<p>Prevent to enter invalid data to backend</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_further_documentation">3.6.2. Further documentation</h4>
<div class="ulist">
<ul>
<li>
<p>Vue.js guide: <a href="https://vuejs.org/v2/guide/" class="bare">https://vuejs.org/v2/guide/</a></p>
</li>
<li>
<p>Vue.js API: <a href="https://vuejs.org/v2/api/" class="bare">https://vuejs.org/v2/api/</a></p>
</li>
<li>
<p>Build commands: <a href="http://vuejs-templates.github.io/webpack/commands.html" class="bare">http://vuejs-templates.github.io/webpack/commands.html</a></p>
</li>
<li>
<p>Vue.js and Webpack integration: <a href="http://vuejs-templates.github.io/webpack/env.html" class="bare">http://vuejs-templates.github.io/webpack/env.html</a></p>
</li>
<li>
<p>Html-Webpack: <a href="https://github.com/jantimon/html-webpack-plugin" class="bare">https://github.com/jantimon/html-webpack-plugin</a></p>
</li>
<li>
<p>Vue Router: <a href="https://github.com/vuejs/vue-router" class="bare">https://github.com/vuejs/vue-router</a></p>
</li>
<li>
<p>Vue Router tutorial: <a href="https://scotch.io/tutorials/getting-started-with-vue-router" class="bare">https://scotch.io/tutorials/getting-started-with-vue-router</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mobile_frontend">4. Mobile Frontend</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_setting_up_your_repository">4.1. Setting up your repository</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the directory where the EventRegistration application resides, e.g., <em>/home/user/git/eventregistration</em></p>
</li>
<li>
<p>Initialize a new, orphan branch with the following commands</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout --orphan android
git reset
rm ./* .gitignore</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
One-liner command that does the same for those who like living dangerously:<br>
<code>git checkout --orphan android &amp;&amp; git reset &amp;&amp; rm ./* .gitignore</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_an_android_project">4.2. Create an Android project</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a new Android project
<span class="image"><img src="./figs/Android-StartNewProject.png" alt="Start new Android project"></span></p>
</li>
<li>
<p>Select a <strong>Basic Activity</strong> and click <strong>Next</strong></p>
<div class="paragraph">
<p><span class="image"><img src="./figs/Android-BasicActivity.png" alt="Select basic activity"></span></p>
</div>
</li>
<li>
<p>Specify project details and click on <strong>Finish</strong></p>
<div class="ulist">
<ul>
<li>
<p>Application name: <strong>EventRegistration-Android</strong></p>
</li>
<li>
<p>Package name: <code>ca.mcgill.ecse321.eventregistration</code></p>
</li>
<li>
<p>Project location: create the project within the prepared working copy of the git repository say, <em>/home/user/git/eventregistration/EventRegistration-Android</em>`)</p>
</li>
<li>
<p>Select <em>Java</em> as language</p>
</li>
<li>
<p>Click on <strong>Finish</strong></p>
<div class="paragraph">
<p><span class="image"><img src="./figs/Android-ProjectSettings.png" alt="Target platform settings"></span></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Wait until the project is built by Gradle, this takes a minute or two</p>
</li>
<li>
<p>Optional step.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Optionally, to setup version control integration, go to <em>File/Settings&#8230;&#8203;/Version Control</em> and add the repository as Git root to the project settings<br>
<span class="image"><img src="./figs/android-studio-git-root.png" alt="Set Git root location"></span><br>
Then, you can issue Git commands from the <em>VCS</em> menu in Android Studio while developing the application. Regardless whether you complete this step or not, you can still use git from the command line, since the project is created in the working directory of your git repository.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select the <strong>Project</strong> view in the left pane (instead of the default <strong>Android</strong> view) and
observe three files:</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/Android-SelectProjectView.png" alt="Project view"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MainActivity.java</strong>: application code is written here (located in
<strong>app/src/main/java</strong>)</p>
</li>
<li>
<p><strong>content_main.xml</strong>: layout specifications of the UI are provided in XML
(located in <em>app/src/main/res/layout</em>)</p>
</li>
<li>
<p><strong>strings.xml</strong>: naming of resources
(located in <em>app/src/main/res/values</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Include a dependency for network communication by adding the following line to the <code>build.gradle</code> file located in the <em>app</em>
folder to the end within the <code>dependencies{ &#8230;&#8203; }</code> part (see figure, but the content is different).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">    implementation 'com.loopj.android:android-async-http:1.4.9'</code></pre>
</div>
</div>
</li>
<li>
<p>Open the <strong>AndroidManifest.xml</strong> file (located in <code>app/src/main</code> within the Android project), and add the following XML tag for setting permissions appropriately (before the existing <code>&lt;application&gt;</code> tag)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ca.mcgill.ecse321.eventregistration"&gt;

    &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
    &lt;!-- Existing content with &lt;application&gt; tag --&gt;
&lt;/manifest&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>As the gradle build file has changed, click on the <strong>Sync</strong> link.</p>
</li>
<li>
<p>Re-build the project by <strong>Build | Make Project</strong>  if still needed.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_developing_for_android_part_1">4.3. Developing for Android: Part 1</h3>
<div class="sect3">
<h4 id="_developing_the_view_layout">4.3.1. Developing the View Layout</h4>
<div class="paragraph">
<p>In the next steps, we will develop a simple GUI as the view for the mobile
EventRegistration app with (1) one text field for specifying the name of a person,
and (2) one <strong>Add Person</strong> button</p>
</div>
<div class="paragraph">
<p>The GUI will look like as depicted below.<br>
<span class="image"><img src="./figs/Android-SimpleGUI.png" alt="Simple GUI"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <strong>content_main.xml</strong> file, which contains a default <strong>Hello World</strong>
text.</p>
</li>
<li>
<p>Replace the highlighted default content with the following XML tags.<br>
<span class="image"><img src="./figs/Android-HelloWorld.png" alt="Android Hello World"></span><br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toTopOf="parent"&gt;

    &lt;TextView
            android:id="@+id/error"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:visibility="gone"
            android:text=""
            android:textColor="@color/colorAccent"/&gt;

    &lt;EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/newperson_name"
        android:hint="@string/newperson_hint"/&gt;

    &lt;Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end"
        android:text="@string/newperson_button"
        android:onClick="addPerson"/&gt;
&lt;/LinearLayout&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>LinearLayout</strong> declares a vertical layout to hold the GUI elements;</p>
</li>
<li>
<p><strong>EditText</strong> adds a textfield to enter the name of the person;</p>
</li>
<li>
<p><strong>Button</strong> provides a button to add a person.</p>
<div class="paragraph">
<p>Some erroneous tags are marked in red, which will be corrected in the following
steps.</p>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_specifying_a_text_field_and_a_button">Specifying a text field and a button</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We place new literals in the <strong>strings.xml</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;string name="newperson_hint"&gt;Who?&lt;/string&gt;
&lt;string name="newperson_button"&gt;Add Person&lt;/string&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Save <strong>strings.xml</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_observing_the_view">Observing the view</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save the file <strong>content_main.xml</strong>.</p>
</li>
<li>
<p>Click on the <strong>Design</strong> tab to check the graphical preview of the app.</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/Android-ContentMainGUI.png" alt="Graphical content view"></span></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_to_backend_via_restful_service_calls">4.3.2. Connecting to backend via RESTful service calls</h4>
<div class="paragraph">
<p>As a next step, we define a view depicted below and add Java code to provide behavior for the view, e.g. what
should happen when the different buttons are clicked.
The key interactions of our application are the following:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>What to do when the application is launched? (<code>onCreate()</code>)</p>
</li>
<li>
<p>What to do when a button is clicked? (<code>addPerson()</code>)</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_create_a_utility_class_for_communicating_with_http_messages">Create a utility class for communicating with HTTP messages</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure you have the <code>implementation 'com.loopj.android:android-async-http:1.4.9'</code> dependency (among others) in the <code>build.gradle</code> file for the <code>app</code> module (see the section on project setup for more details)</p>
</li>
<li>
<p>Create the <code>HttpUtils</code> class in the <code>ca.mcgill.ecse321.eventregistration</code> package and add missing imports as required with <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span></p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
You may need to wait a few minutes after dependencies have been resolved to allow the IDE to index classes
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class HttpUtils {
    public static final String DEFAULT_BASE_URL = "https://eventregistration-backend-123.herokuapp.com/";

    private static String baseUrl;
    private static AsyncHttpClient client = new AsyncHttpClient();

    static {
        baseUrl = DEFAULT_BASE_URL;
    }

    public static String getBaseUrl() {
        return baseUrl;
    }

    public static void setBaseUrl(String baseUrl) {
        HttpUtils.baseUrl = baseUrl;
    }

    public static void get(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
        client.get(getAbsoluteUrl(url), params, responseHandler);
    }

    public static void post(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
        client.post(getAbsoluteUrl(url), params, responseHandler);
    }

    public static void getByUrl(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
        client.get(url, params, responseHandler);
    }

    public static void postByUrl(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
        client.post(url, params, responseHandler);
    }

    private static String getAbsoluteUrl(String relativeUrl) {
        return baseUrl + relativeUrl;
    }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_further_helper_methods">Further helper methods</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <strong>MainActivity.java</strong> file.</p>
</li>
<li>
<p>Add a new attribute to the beginning of the class for error handling.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ...
public class MainActivity extends AppCompatActivity {
  private String error = null;

  // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>Implement the <code>refreshErrorMessage()</code> method to display the error message on the screen, if there is any.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Again, add imports with <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span> (import is needed for <code>TextView</code>)
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private void refreshErrorMessage() {
  // set the error message
  TextView tvError = (TextView) findViewById(R.id.error);
  tvError.setText(error);

  if (error == null || error.length() == 0) {
    tvError.setVisibility(View.GONE);
  } else {
    tvError.setVisibility(View.VISIBLE);
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add code to initialize the application in the <code>onCreate()</code> method (after the auto-generated code).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected void onCreate(Bundle savedInstanceState) {
  // ...
  // INSERT TO END OF THE METHOD AFTER AUTO-GENERATED CODE
  // initialize error message text view
  refreshErrorMessage();
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_creating_a_handler_for_add_person_button">Creating a handler for Add Person button</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>addPerson()</code> method as follows</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void addPerson(View v) {
  error = "";
  final TextView tv = (TextView) findViewById(R.id.newperson_name);
  HttpUtils.post("persons/" + tv.getText().toString(), new RequestParams(), new JsonHttpResponseHandler() {
      @Override
      public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
          refreshErrorMessage();
          tv.setText("");
      }
      @Override
      public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {
          try {
              error += errorResponse.get("message").toString();
          } catch (JSONException e) {
              error += e.getMessage();
          }
          refreshErrorMessage();
      }
  });
}</code></pre>
</div>
</div>
</li>
<li>
<p>Import the missing classes again with <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span>. There are multiple <code>Header</code> classes available, you need to import the <code>cz.msebera.android.httpclient.Header</code> class.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_and_testing_the_application_on_a_virtual_device">4.4. Running and Testing the Application on a Virtual Device</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the Spring backend application on Heroku, while ensure that the <code>DEFAULT_BASE_URL</code> in <code>HttpUtils</code> is configured accordingly.<br></p>
</li>
<li>
<p>Click on the <em>AVD manager</em> button in Android Studio near the top right corner of the window</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/create-virtual-device.png" alt="Open terminal"></span></p>
</div>
</li>
<li>
<p>Add a new device with default settings.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You might be asked to download emulator files. If this happens, click OK.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Start/Debug the application using the buttons highlighted on the figure below</p>
<div class="paragraph">
<p><span class="image"><img src="./figs/android-studio-deploy.png" alt="Select system image"></span></p>
</div>
</li>
<li>
<p>After you select the device (in this case Nexus 5X) as deployment target, the application will automatically be deployed and started within an Android VM, and it is ready to use. Be patient, deployment and startup may take a few seconds.</p>
</li>
<li>
<p>Leave the text field empty, then try adding a person. You should get an error message on screen saying a person cannot be added with no name.</p>
</li>
<li>
<p>Supply a name for a new person, then try adding it. Upon successful completion, the text field and the error message should clear.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_developing_for_android_part_2">4.5. Developing for Android (Part 2)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can use the <a href="https://eventregistration-backend-123.herokuapp.com" class="bare">https://eventregistration-backend-123.herokuapp.com</a> backend URL for the event registration example in the <code>HttpUtils</code> class.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a next step, we extend the view and its behavior. Key interactions of our application added in this phase are the following:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>What to do when the application is launched? (<code>onCreate()</code>)</p>
</li>
<li>
<p>What to do when application data is updated? (<code>refreshLists()</code>)</p>
</li>
<li>
<p>What to do when a button is clicked? (<code>addEvent()</code>, and <code>register()</code>)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The expected layout of the application:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/android-studio-main-layout.png" alt="android studio main layout"></span></p>
</div>
<div class="sect3">
<h4 id="_create_helper_classes">4.5.1. Create helper classes</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the classes included in the next two steps within the <code>ca.mcgill.ecse321.eventregistration</code> package</p>
</li>
<li>
<p>Create a new class called <code>DatePickerFragment</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Import missing classes with <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span>. If the import option offers multiple classes, choose the ones that are not deprecated.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DatePickerFragment extends DialogFragment
        implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Parse the existing time from the arguments
        Bundle args = getArguments();
        if (args != null) {
            year = args.getInt("year");
            month = args.getInt("month");
            day = args.getInt("day");
        }

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        MainActivity myActivity = (MainActivity)getActivity();
        myActivity.setDate(getArguments().getInt("id"), day, month, year);
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new class called <code>TimePickerFragment</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The method <code>setTime</code> is missing from the <code>MainActivity</code> class and will be added later (i.e., the error message which complains that this method is missing is normal)
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class TimePickerFragment extends DialogFragment
        implements TimePickerDialog.OnTimeSetListener {

    String label;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        int hour = 0;
        int minute = 0;

        // Parse the existing time from the arguments
        Bundle args = getArguments();
        if (args != null) {
            hour = args.getInt("hour");
            minute = args.getInt("minute");
        }

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute,
                DateFormat.is24HourFormat(getActivity()));
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        MainActivity myActivity = (MainActivity)getActivity();
        myActivity.setTime(getArguments().getInt("id"), hourOfDay, minute);
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following helper methods within the <code>MainActivity</code> class to support date and time pickers</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private Bundle getTimeFromLabel(String text) {
    Bundle rtn = new Bundle();
    String comps[] = text.toString().split(":");
    int hour = 12;
    int minute = 0;

    if (comps.length == 2) {
        hour = Integer.parseInt(comps[0]);
        minute = Integer.parseInt(comps[1]);
    }

    rtn.putInt("hour", hour);
    rtn.putInt("minute", minute);

    return rtn;
}

private Bundle getDateFromLabel(String text) {
    Bundle rtn = new Bundle();
    String comps[] = text.toString().split("-");
    int day = 1;
    int month = 1;
    int year = 1;

    if (comps.length == 3) {
        day = Integer.parseInt(comps[0]);
        month = Integer.parseInt(comps[1]);
        year = Integer.parseInt(comps[2]);
    }

    rtn.putInt("day", day);
    rtn.putInt("month", month-1);
    rtn.putInt("year", year);

    return rtn;
}

public void showTimePickerDialog(View v) {
    TextView tf = (TextView) v;
    Bundle args = getTimeFromLabel(tf.getText().toString());
    args.putInt("id", v.getId());

    TimePickerFragment newFragment = new TimePickerFragment();
    newFragment.setArguments(args);
    newFragment.show(getSupportFragmentManager(), "timePicker");
}

public void showDatePickerDialog(View v) {
    TextView tf = (TextView) v;
    Bundle args = getDateFromLabel(tf.getText().toString());
    args.putInt("id", v.getId());

    DatePickerFragment newFragment = new DatePickerFragment();
    newFragment.setArguments(args);
    newFragment.show(getSupportFragmentManager(), "datePicker");
}

public void setTime(int id, int h, int m) {
    TextView tv = (TextView) findViewById(id);
    tv.setText(String.format("%02d:%02d", h, m));
}

public void setDate(int id, int d, int m, int y) {
    TextView tv = (TextView) findViewById(id);
    tv.setText(String.format("%02d-%02d-%04d", d, m + 1, y));
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_update_view_definition">4.5.2. Update view definition</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The corresponding (but partly incomplete) view definition in the <code>content_main.xml</code> file is the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="vertical"&gt;
    &lt;TextView
        android:id="@+id/error"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:visibility="gone"
        android:text=""
        android:textColor="@color/colorAccent"/&gt;

    &lt;LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:orientation="vertical"&gt;
        &lt;LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"&gt;
            &lt;LinearLayout
                android:orientation="horizontal"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"&gt;
                &lt;TextView
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:text="@string/personspinner_label"/&gt;
                &lt;Spinner
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:layout_gravity="end"
                    android:id="@+id/personspinner"/&gt;
            &lt;/LinearLayout&gt;
            &lt;LinearLayout
                android:orientation="horizontal"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"&gt;
                &lt;TextView
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:text="@string/eventspinner_label"/&gt;
                &lt;Spinner
                    android:id="@+id/eventspinner"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="end"
                    android:layout_margin="0dp"/&gt;
            &lt;/LinearLayout&gt;
        &lt;/LinearLayout&gt;
        &lt;!-- TODO add a Register and Refresh Lists buttons here --&gt;
    &lt;/LinearLayout&gt;

    &lt;View
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#16552e"/&gt;

    &lt;LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"&gt;
        &lt;EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/newperson_name"
            android:hint="@string/newperson_hint"/&gt;
        &lt;Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:text="@string/newperson_button"
            android:onClick="addPerson"/&gt;
    &lt;/LinearLayout&gt;

    &lt;View
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#16552e"/&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"&gt;
        &lt;EditText android:id="@+id/newevent_name"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:hint="@string/newevent_hint"/&gt;
        &lt;LinearLayout
            android:orientation="horizontal"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"&gt;
            &lt;TextView
                android:layout_height="wrap_content"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:text="@string/newevent_date_label"/&gt;
            &lt;TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/newevent_date_first"
                android:layout_gravity="end"
                android:id="@+id/newevent_date"
                android:onClick="showDatePickerDialog"/&gt;
        &lt;/LinearLayout&gt;
        &lt;LinearLayout
            android:orientation="horizontal"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"&gt;
            &lt;TextView
                android:layout_height="wrap_content"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:text="@string/starttime_label"/&gt;
            &lt;TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/starttime_first"
                android:layout_gravity="end"
                android:id="@+id/starttime"
                android:onClick="showTimePickerDialog"/&gt;
        &lt;/LinearLayout&gt;
        &lt;!-- TODO add a label and a time picker for event end time --&gt;
        &lt;!-- TODO add Add Event button here --&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>The missing string definitions go in the <code>res/values/strings.xml</code> resource</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;resources&gt;
    &lt;string name="app_name"&gt;EventRegistration-Android&lt;/string&gt;
    &lt;string name="action_settings"&gt;Settings&lt;/string&gt;
    &lt;string name="newperson_hint"&gt;Who?&lt;/string&gt;
    &lt;string name="newperson_button"&gt;Add Person&lt;/string&gt;
    &lt;string name="newevent_date_label"&gt;Date?&lt;/string&gt;
    &lt;string name="personspinner_label"&gt;Person?&lt;/string&gt;
    &lt;string name="eventspinner_label"&gt;Event?&lt;/string&gt;
    &lt;string name="starttime_label"&gt;Start time?&lt;/string&gt;
    &lt;string name="newevent_date_first"&gt;01-07-2019&lt;/string&gt;
    &lt;string name="starttime_first"&gt;10:00&lt;/string&gt;
    &lt;string name="newevent_hint"&gt;Event Name?&lt;/string&gt;
&lt;/resources&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>TODO</strong>: add a <em>Register</em> button to allow registering a selected person to a selected event (call the <code>register()</code> method when clicked - this is to be implemented in the upcoming steps)</p>
</li>
<li>
<p><strong>TODO</strong>: add a <em>Refresh Lists</em> button that refreshes the contents of the event and person spinners (call the <code>refreshLists()</code> method when clicked)</p>
</li>
<li>
<p><strong>TODO</strong>: add a label with text <em>End?</em> below the <em>Start?</em> label</p>
</li>
<li>
<p><strong>TODO</strong>: add a time picker to select the end time of a new event</p>
</li>
<li>
<p><strong>TODO</strong>: add an <em>Add Event</em> button to allow creating new events from the user interface (call the <code>addEvent()</code> method when clicked - this is to be implemented in the upcoming steps)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_initialization_on_application_launch">4.5.3. Initialization on application launch</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <strong>MainActivity.java</strong> file.</p>
</li>
<li>
<p>Add a few new attributes to the beginning of the class as helpers for persistence and error
handling.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MainActivity extends AppCompatActivity {
  private String error = null;
  // APPEND NEW CONTENT STARTING FROM HERE
  private List&lt;String&gt; personNames = new ArrayList&lt;&gt;();
  private ArrayAdapter&lt;String&gt; personAdapter;
  private List&lt;String&gt; eventNames = new ArrayList&lt;&gt;();
  private ArrayAdapter&lt;String&gt; eventAdapter;

  //...
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Import missing classes (e.g. use <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add code to initialize the application with data from the server in the <code>onCreate()</code> method (after the auto-generated code).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected void onCreate(Bundle savedInstanceState) {
  // ...
  // INSERT TO END OF THE METHOD
  // Add adapters to spinner lists and refresh spinner content
  Spinner personSpinner = (Spinner) findViewById(R.id.personspinner);
  Spinner eventSpinner = (Spinner) findViewById(R.id.eventspinner);

  personAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_spinner_item, personNames);
  personAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  personSpinner.setAdapter(personAdapter);

  eventAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_spinner_item, eventNames);
  eventAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  eventSpinner.setAdapter(eventAdapter);

  // Get initial content for spinners
  refreshLists(this.getCurrentFocus());
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>At this point the <code>refreshLists()</code> method is missing, this is to be implemented in the upcoming steps.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reactions_to_updated_data">4.5.4. Reactions to updated data</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the missing new method <code>refreshLists()</code> which seeks for the event and person spinners and sets their content according to the data retrieved from the server</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void refreshLists(View view) {
    refreshList(personAdapter ,personNames, "people");
    refreshList(eventAdapter, eventNames, "events");
}

private void refreshList(final ArrayAdapter&lt;String&gt; adapter, final List&lt;String&gt; names, final String restFunctionName) {
    HttpUtils.get(restFunctionName, new RequestParams(), new JsonHttpResponseHandler() {

        @Override
        public void onSuccess(int statusCode, Header[] headers, JSONArray response) {
            names.clear();
            names.add("Please select...");
            for( int i = 0; i &lt; response.length(); i++){
                try {
                    names.add(response.getJSONObject(i).getString("name"));
                } catch (Exception e) {
                    error += e.getMessage();
                }
                refreshErrorMessage();
            }
            adapter.notifyDataSetChanged();
        }

        @Override
        public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {
            try {
                error += errorResponse.get("message").toString();
            } catch (JSONException e) {
                error += e.getMessage();
            }
            refreshErrorMessage();
        }
    });
}</code></pre>
</div>
</div>
</li>
<li>
<p>Implement the <code>addEvent()</code> method</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void addEvent(View v) {
    // start time
    TextView tv = (TextView) findViewById(R.id.starttime);
    String text = tv.getText().toString();
    String comps[] = text.split(":");

    int startHours = Integer.parseInt(comps[0]);
    int startMinutes = Integer.parseInt(comps[1]);

    // TODO get end time

    // date
    tv = (TextView) findViewById(R.id.newevent_date);
    text = tv.getText().toString();
    comps = text.split("-");

    int year = Integer.parseInt(comps[2]);
    int month = Integer.parseInt(comps[1]);
    int day = Integer.parseInt(comps[0]);

    // name
    tv = (TextView) findViewById(R.id.newevent_name);
    String name = tv.getText().toString();

    // Reminder: calling the service looks like this:
    // https://eventregistration-backend-123.herokuapp.com/events/testEvent?date=2013-10-23&amp;startTime=00:00&amp;endTime=23:59

    RequestParams rp = new RequestParams();

    NumberFormat formatter = new DecimalFormat("00");
    rp.add("date", year + "-" + formatter.format(month) + "-" + formatter.format(day));
    rp.add("startTime", formatter.format(startHours) + ":" + formatter.format(startMinutes));
    // TODO add end time as parameter

    HttpUtils.post("events/" + name, rp, new JsonHttpResponseHandler() {
        @Override
        public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
            refreshErrorMessage();
            ((TextView) findViewById(R.id.newevent_name)).setText("");
        }

        @Override
        public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {
            try {
                error += errorResponse.get("message").toString();
            } catch (JSONException e) {
                error += e.getMessage();
            }
            refreshErrorMessage();
        }
    });
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>TODO</strong>: get the end time of the new event</p>
</li>
<li>
<p><strong>TODO</strong>: supply the end time to the REST request as an additional parameter</p>
</li>
</ul>
</div>
</li>
<li>
<p>Implement the <code>register()</code> method</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void register(View v) {

    Spinner partSpinner = (Spinner) findViewById(R.id.personspinner);
    Spinner eventSpinner = (Spinner) findViewById(R.id.eventspinner);

    error = "";

    // TODO issue an HTTP POST here
    // Reminder: calling the service looks like this:
    // https://eventregistration-backend-123.herokuapp.com/register?person=testPreson&amp;event=testEvent


    // Set back the spinners to the initial state after posting the request
    partSpinner.setSelection(0);
    eventSpinner.setSelection(0);

    refreshErrorMessage();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>TODO</strong>: implement the HTTP POST part of the <code>register()</code> method on your own</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-03-01 23:18:48 UTC
</div>
</div>
<link rel="stylesheet" href="./highlight.js/styles/foundation.min.css">
<script src="./highlight.js/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>